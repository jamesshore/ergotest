{"version":3,"sources":["/Users/jshore/Documents/Projects/ergotest/src/util/tests.ts"],"sourcesContent":["import { RunResult, TestCaseResult, TestMarkValue, TestResult, TestSuiteResult } from \"../ergotest/results/test_result.js\";\n\nexport * from \"ergotest\";\n\nexport function createSuite({\n\tname = [],\n\ttests = [],\n\tbeforeAll = undefined,\n\tafterAll = undefined,\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\ttests?: TestResult[],\n\tbeforeAll?: TestCaseResult[],\n\tafterAll?: TestCaseResult[],\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\tif (!Array.isArray(name)) name = [ name ];\n\treturn TestSuiteResult.create({ name, tests, beforeAll, afterAll, filename, mark });\n}\n\nexport function createPass({\n\tname = [],\n\tbeforeEach = [],\n\tafterEach = [],\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\tbeforeEach?: RunResult[] | TestCaseResult[],\n\tafterEach?: RunResult[] | TestCaseResult[],\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\tif (!Array.isArray(name)) name = [ name ];\n\treturn TestCaseResult.create({\n\t\tmark,\n\t\tbeforeEach: beforeEach.map(each => { return each instanceof RunResult ? each : each.it; }),\n\t\tafterEach: afterEach.map(each => { return each instanceof RunResult ? each : each.it; }),\n\t\tit: RunResult.pass({ name, filename }),\n\t});\n}\n\nexport function createFail({\n\tname = [],\n\terror = \"irrelevant error\",\n\trenderError = undefined,\n\tbeforeEach = [],\n\tafterEach = [],\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\terror?: unknown,\n\trenderError?: () => string,\n\tbeforeEach?: RunResult[] | TestCaseResult[],\n\tafterEach?: RunResult[] | TestCaseResult[],\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\tif (!Array.isArray(name)) name = [ name ];\n\treturn TestCaseResult.create({\n\t\tmark,\n\t\tbeforeEach: beforeEach.map(each => { return each instanceof RunResult ? each : each.it; }),\n\t\tafterEach: afterEach.map(each => { return each instanceof RunResult ? each : each.it; }),\n\t\tit: RunResult.fail({ name, filename, error, renderError }),\n\t});\n}\n\nexport function createSkip({\n\tname = [],\n\tbeforeEach = [],\n\tafterEach = [],\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\tbeforeEach?: RunResult[] | TestCaseResult[],\n\tafterEach?: RunResult[] | TestCaseResult[],\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\tif (!Array.isArray(name)) name = [ name ];\n\treturn TestCaseResult.create({\n\t\tmark,\n\t\tbeforeEach: beforeEach.map(each => { return each instanceof RunResult ? each : each.it; }),\n\t\tafterEach: afterEach.map(each => { return each instanceof RunResult ? each : each.it; }),\n\t\tit: RunResult.skip({ name, filename }),\n\t});\n}\n\nexport function createTimeout({\n\tname = [],\n\ttimeout = 42,\n\tbeforeEach = [],\n\tafterEach = [],\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\ttimeout?: number,\n\tbeforeEach?: RunResult[] | TestCaseResult[],\n\tafterEach?: RunResult[] | TestCaseResult[],\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\tif (!Array.isArray(name)) name = [ name ];\n\treturn TestCaseResult.create({\n\t\tmark,\n\t\tbeforeEach: beforeEach.map(each => { return each instanceof RunResult ? each : each.it; }),\n\t\tafterEach: afterEach.map(each => { return each instanceof RunResult ? each : each.it; }),\n\t\tit: RunResult.timeout({ name, filename, timeout }),\n\t});\n}"],"names":["RunResult","TestCaseResult","TestSuiteResult","createSuite","name","tests","beforeAll","undefined","afterAll","filename","mark","Array","isArray","create","createPass","beforeEach","afterEach","map","each","it","pass","createFail","error","renderError","fail","createSkip","skip","createTimeout","timeout"],"mappings":"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"}