{"version":3,"sources":["/Users/jshore/Documents/Projects/ergotest/src/util/tests.ts"],"sourcesContent":["import { RunResult, TestCaseResult, TestMarkValue, TestResult, TestSuiteResult } from \"../ergotest/test_result.js\";\n\nexport * from \"ergotest\";\n\nexport function createSuite({\n\tname = [],\n\ttests = [],\n\tbeforeAll = undefined,\n\tafterAll = undefined,\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\ttests?: TestResult[],\n\tbeforeAll?: TestCaseResult[],\n\tafterAll?: TestCaseResult[],\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\treturn TestSuiteResult.create({ name, tests, beforeAll, afterAll, filename, mark });\n}\n\nexport function createPass({\n\tname = [],\n\tbeforeEach = [],\n\tafterEach = [],\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\tbeforeEach?: RunResult[] | TestCaseResult[],\n\tafterEach?: RunResult[] | TestCaseResult[],\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\treturn TestCaseResult.create({\n\t\tmark,\n\t\tbeforeEach: beforeEach.map(each => { return each instanceof RunResult ? each : each.it; }),\n\t\tafterEach: afterEach.map(each => { return each instanceof RunResult ? each : each.it; }),\n\t\tit: RunResult.pass({ name, filename }),\n\t});\n}\n\nexport function createFail({\n\tname = [],\n\terror = \"irrelevant error\",\n\trenderError = undefined,\n\tbeforeEach = [],\n\tafterEach = [],\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\terror?: unknown,\n\trenderError?: () => string,\n\tbeforeEach?: RunResult[] | TestCaseResult[],\n\tafterEach?: RunResult[] | TestCaseResult[],\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\treturn TestCaseResult.create({\n\t\tmark,\n\t\tbeforeEach: beforeEach.map(each => { return each instanceof RunResult ? each : each.it; }),\n\t\tafterEach: afterEach.map(each => { return each instanceof RunResult ? each : each.it; }),\n\t\tit: RunResult.fail({ name, filename, error, renderError }),\n\t});\n}\n\nexport function createSkip({\n\tname = [],\n\tbeforeEach = [],\n\tafterEach = [],\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\tbeforeEach?: RunResult[] | TestCaseResult[],\n\tafterEach?: RunResult[] | TestCaseResult[],\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\treturn TestCaseResult.create({\n\t\tmark,\n\t\tbeforeEach: beforeEach.map(each => { return each instanceof RunResult ? each : each.it; }),\n\t\tafterEach: afterEach.map(each => { return each instanceof RunResult ? each : each.it; }),\n\t\tit: RunResult.skip({ name, filename }),\n\t});\n}\n\nexport function createTimeout({\n\tname = [],\n\ttimeout = 42,\n\tbeforeEach = [],\n\tafterEach = [],\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\ttimeout?: number,\n\tbeforeEach?: RunResult[] | TestCaseResult[],\n\tafterEach?: RunResult[] | TestCaseResult[],\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\treturn TestCaseResult.create({\n\t\tmark,\n\t\tbeforeEach: beforeEach.map(each => { return each instanceof RunResult ? each : each.it; }),\n\t\tafterEach: afterEach.map(each => { return each instanceof RunResult ? each : each.it; }),\n\t\tit: RunResult.timeout({ name, filename, timeout }),\n\t});\n}"],"names":["RunResult","TestCaseResult","TestSuiteResult","createSuite","name","tests","beforeAll","undefined","afterAll","filename","mark","create","createPass","beforeEach","afterEach","map","each","it","pass","createFail","error","renderError","fail","createSkip","skip","createTimeout","timeout"],"mappings":"AAAA,SAASA,SAAS,EAAEC,cAAc,EAA6BC,eAAe,QAAQ,6BAA6B;AAEnH,cAAc,WAAW;AAEzB,OAAO,SAASC,YAAY,EAC3BC,OAAO,EAAE,EACTC,QAAQ,EAAE,EACVC,YAAYC,SAAS,EACrBC,WAAWD,SAAS,EACpBE,WAAWF,SAAS,EACpBG,OAAOH,SAAS,EAQhB,GAAG,CAAC,CAAC;IACL,OAAOL,gBAAgBS,MAAM,CAAC;QAAEP;QAAMC;QAAOC;QAAWE;QAAUC;QAAUC;IAAK;AAClF;AAEA,OAAO,SAASE,WAAW,EAC1BR,OAAO,EAAE,EACTS,aAAa,EAAE,EACfC,YAAY,EAAE,EACdL,WAAWF,SAAS,EACpBG,OAAOH,SAAS,EAOhB,GAAG,CAAC,CAAC;IACL,OAAON,eAAeU,MAAM,CAAC;QAC5BD;QACAG,YAAYA,WAAWE,GAAG,CAACC,CAAAA;YAAU,OAAOA,gBAAgBhB,YAAYgB,OAAOA,KAAKC,EAAE;QAAE;QACxFH,WAAWA,UAAUC,GAAG,CAACC,CAAAA;YAAU,OAAOA,gBAAgBhB,YAAYgB,OAAOA,KAAKC,EAAE;QAAE;QACtFA,IAAIjB,UAAUkB,IAAI,CAAC;YAAEd;YAAMK;QAAS;IACrC;AACD;AAEA,OAAO,SAASU,WAAW,EAC1Bf,OAAO,EAAE,EACTgB,QAAQ,kBAAkB,EAC1BC,cAAcd,SAAS,EACvBM,aAAa,EAAE,EACfC,YAAY,EAAE,EACdL,WAAWF,SAAS,EACpBG,OAAOH,SAAS,EAShB,GAAG,CAAC,CAAC;IACL,OAAON,eAAeU,MAAM,CAAC;QAC5BD;QACAG,YAAYA,WAAWE,GAAG,CAACC,CAAAA;YAAU,OAAOA,gBAAgBhB,YAAYgB,OAAOA,KAAKC,EAAE;QAAE;QACxFH,WAAWA,UAAUC,GAAG,CAACC,CAAAA;YAAU,OAAOA,gBAAgBhB,YAAYgB,OAAOA,KAAKC,EAAE;QAAE;QACtFA,IAAIjB,UAAUsB,IAAI,CAAC;YAAElB;YAAMK;YAAUW;YAAOC;QAAY;IACzD;AACD;AAEA,OAAO,SAASE,WAAW,EAC1BnB,OAAO,EAAE,EACTS,aAAa,EAAE,EACfC,YAAY,EAAE,EACdL,WAAWF,SAAS,EACpBG,OAAOH,SAAS,EAOhB,GAAG,CAAC,CAAC;IACL,OAAON,eAAeU,MAAM,CAAC;QAC5BD;QACAG,YAAYA,WAAWE,GAAG,CAACC,CAAAA;YAAU,OAAOA,gBAAgBhB,YAAYgB,OAAOA,KAAKC,EAAE;QAAE;QACxFH,WAAWA,UAAUC,GAAG,CAACC,CAAAA;YAAU,OAAOA,gBAAgBhB,YAAYgB,OAAOA,KAAKC,EAAE;QAAE;QACtFA,IAAIjB,UAAUwB,IAAI,CAAC;YAAEpB;YAAMK;QAAS;IACrC;AACD;AAEA,OAAO,SAASgB,cAAc,EAC7BrB,OAAO,EAAE,EACTsB,UAAU,EAAE,EACZb,aAAa,EAAE,EACfC,YAAY,EAAE,EACdL,WAAWF,SAAS,EACpBG,OAAOH,SAAS,EAQhB,GAAG,CAAC,CAAC;IACL,OAAON,eAAeU,MAAM,CAAC;QAC5BD;QACAG,YAAYA,WAAWE,GAAG,CAACC,CAAAA;YAAU,OAAOA,gBAAgBhB,YAAYgB,OAAOA,KAAKC,EAAE;QAAE;QACxFH,WAAWA,UAAUC,GAAG,CAACC,CAAAA;YAAU,OAAOA,gBAAgBhB,YAAYgB,OAAOA,KAAKC,EAAE;QAAE;QACtFA,IAAIjB,UAAU0B,OAAO,CAAC;YAAEtB;YAAMK;YAAUiB;QAAQ;IACjD;AACD"}