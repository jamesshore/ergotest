{"version":3,"sources":["/Users/jshore/Documents/Projects/ergotest/src/tests/_test_result_test.ts"],"sourcesContent":["// Copyright Titanium I.T. LLC. License granted under terms of \"The MIT License.\"\n\nimport { assert, test } from \"../tests.js\";\nimport { AssertionError } from \"node:assert\";\nimport { TestCaseResult, TestMark, TestMarkValue, TestResult, TestStatus } from \"./test_result.js\";\nimport { TestRenderer } from \"./test_renderer.js\";\n\nexport default test(({ describe }) => {\n\n\tdescribe(\"test suite\", ({ it }) => {\n\n\t\tit(\"has a name and list of test results\", () => {\n\t\t\tconst list = [ createPass({ name: \"test 1\" }), createPass({ name: \"test 2\" }) ];\n\t\t\tconst result = TestResult.suite([ \"my name\" ], list);\n\n\t\t\tassert.deepEqual(result.name, [ \"my name\" ]);\n\t\t\tassert.deepEqual(result.children, list);\n\t\t});\n\n\t\tit(\"name can include parent suites\", () => {\n\t\t\tconst suite = createSuite({ name: [ \"parent\", \"child\", \"grandchild\" ] });\n\n\t\t\tassert.deepEqual(suite.name, [ \"parent\", \"child\", \"grandchild\" ]);\n\t\t});\n\n\t\tit(\"has optional filename\", () => {\n\t\t\tconst suite = createSuite({ filename: \"/my/filename\" });\n\t\t\tassert.equal(suite.filename, \"/my/filename\");\n\t\t});\n\n\t\tit(\"has a mark\", () => {\n\t\t\tconst notSpecified = createSuite();\n\t\t\tconst none = createSuite({ mark: TestMark.none });\n\t\t\tconst skip = createSuite({ mark: TestMark.skip });\n\t\t\tconst only = createSuite({ mark: TestMark.only });\n\n\t\t\tassert.equal(notSpecified.mark, TestMark.none);\n\t\t\tassert.equal(none.mark, TestMark.none);\n\t\t\tassert.equal(skip.mark, TestMark.skip);\n\t\t\tassert.equal(only.mark, TestMark.only);\n\t\t});\n\n\t\tit(\"can be compared using equals()\", () => {\n\t\t\tassert.dotEquals(createSuite({ name: \"my name\" }), createSuite({ name: \"my name\" }));\n\t\t\tassert.notDotEquals(createSuite({ name: \"my name\" }), createSuite({ name: \"different\" }));\n\n\t\t\tassert.dotEquals(createSuite({ mark: TestMark.skip }), createSuite({ mark: TestMark.skip }));\n\t\t\tassert.notDotEquals(createSuite({ mark: TestMark.skip }), createSuite({ mark: TestMark.only }));\n\n\t\t\tassert.dotEquals(createSuite({ name: [ \"parent\", \"child\" ]}), createSuite({ name: [ \"parent\", \"child\" ]}));\n\t\t\tassert.notDotEquals(createSuite({ name: [ \"parent\", \"child\" ]}), createSuite({ name: [ \"parent\", \"different\" ]}));\n\n\t\t\tassert.dotEquals(\n\t\t\t\tcreateSuite({ name: \"my name\", children: [ createPass({ name: \"test name\" }) ]}),\n\t\t\t\tcreateSuite({ name: \"my name\", children: [ createPass({ name: \"test name\" }) ]}),\n\t\t\t);\n\t\t\tassert.notDotEquals(\n\t\t\t\tcreateSuite({ name: \"my name\", children: [ createPass({ name: \"test name\" }) ]}),\n\t\t\t\tcreateSuite({ name: \"my name\", children: [ createPass({ name: \"different\" }) ]}),\n\t\t\t);\n\t\t});\n\n\t});\n\n\n\tdescribe(\"test suite rendering\", ({ it }) => {\n\n\t\tit(\"renders marks, errors, and a summary to a nicely-formatted string\", () => {\n\t\t\tconst fail = createFail();\n\t\t\tconst result = createSuite({ children: [\n\t\t\t\tcreatePass({ mark: TestMark.only }),\n\t\t\t\tcreateSkip({ mark: TestMark.skip }),\n\t\t\t\tfail,\n\t\t\t\tcreateTimeout(),\n\t\t\t]});\n\n\t\t\tconst renderer = TestRenderer.create();\n\t\t\tassert.equal(result.render(),\n\t\t\t\trenderer.renderMarksAsLines([\n\t\t\t\t\tcreatePass({ mark: TestMark.only }),\n\t\t\t\t\tcreateSkip({ mark: TestMark.skip })\n\t\t\t\t]) + \"\\n\\n\\n\" +\n\t\t\t\trenderer.renderAsMultipleLines([\n\t\t\t\t\tfail,\n\t\t\t\t\tcreateTimeout(),\n\t\t\t\t]) + \"\\n\\n\" +\n\t\t\t\trenderer.renderSummary(result),\n\t\t\t);\n\t\t});\n\n\t\tit(\"renders marks and summary without errors\", () => {\n\t\t\tconst result = createSuite({ children: [\n\t\t\t\tcreatePass({ mark: TestMark.only }),\n\t\t\t\tcreateSkip({ mark: TestMark.skip }),\n\t\t\t]});\n\n\t\t\tconst renderer = TestRenderer.create();\n\t\t\tassert.equal(result.render(),\n\t\t\t\trenderer.renderMarksAsLines([\n\t\t\t\t\tcreatePass({ mark: TestMark.only }),\n\t\t\t\t\tcreateSkip({ mark: TestMark.skip })\n\t\t\t\t]) + \"\\n\\n\" +\n\t\t\t\trenderer.renderSummary(result),\n\t\t\t);\n\t\t});\n\n\t\tit(\"renders errors and summary without marks\", () => {\n\t\t\tconst fail = createFail();\n\t\t\tconst result = createSuite({ children: [\n\t\t\t\t\tfail,\n\t\t\t\t\tcreateTimeout(),\n\t\t\t]});\n\n\t\t\tconst renderer = TestRenderer.create();\n\t\t\tassert.equal(result.render(),\n\t\t\t\trenderer.renderAsMultipleLines([\n\t\t\t\t\tfail,\n\t\t\t\t\tcreateTimeout(),\n\t\t\t\t]) + \"\\n\\n\" +\n\t\t\t\trenderer.renderSummary(result),\n\t\t\t);\n\t\t});\n\n\t\tit(\"renders summary alone\", () => {\n\t\t\tconst result = createSuite({ children: [\n\t\t\t\tcreatePass(),\n\t\t\t]});\n\n\t\t\tconst renderer = TestRenderer.create();\n\t\t\tassert.equal(result.render(),\n\t\t\t\trenderer.renderSummary(result),\n\t\t\t);\n\t\t});\n\n\t\tit(\"can include average test time in summary\", () => {\n\t\t\tconst result = createSuite({ children: [\n\t\t\t\tcreatePass(),\n\t\t\t\tcreateSkip(),\n\t\t\t]});\n\n\t\t\tconst renderer = TestRenderer.create();\n\t\t\tassert.equal(result.render(\"\", 100),\n\t\t\t\trenderer.renderSummary(result, 100),\n\t\t\t);\n\t\t});\n\n\t\tit(\"adds optional preamble when result has marks and errors\", () => {\n\t\t\tconst result = createSuite({ children: [\n\t\t\t\tcreatePass({ mark: TestMark.only }),\n\t\t\t\tcreateTimeout(),\n\t\t\t]});\n\n\t\t\tconst renderer = TestRenderer.create();\n\t\t\tassert.equal(result.render(\"my_preamble\"),\n\t\t\t\t\"my_preamble\" +\n\t\t\t\trenderer.renderMarksAsLines([\n\t\t\t\t\tcreatePass({ mark: TestMark.only }),\n\t\t\t\t]) + \"\\n\\n\\n\" +\n\t\t\t\trenderer.renderAsMultipleLines([\n\t\t\t\t\tcreateTimeout(),\n\t\t\t\t]) + \"\\n\\n\" +\n\t\t\t\trenderer.renderSummary(result),\n\t\t\t);\n\t\t});\n\n\t\tit(\"adds optional preamble when result has marks alone\", () => {\n\t\t\tconst result = createSuite({ children: [\n\t\t\t\tcreatePass({ mark: TestMark.only }),\n\t\t\t]});\n\n\t\t\tconst renderer = TestRenderer.create();\n\t\t\tassert.equal(result.render(\"my_preamble\"),\n\t\t\t\t\"my_preamble\" +\n\t\t\t\trenderer.renderMarksAsLines([\n\t\t\t\t\tcreatePass({ mark: TestMark.only }),\n\t\t\t\t]) + \"\\n\\n\" +\n\t\t\t\trenderer.renderSummary(result),\n\t\t\t);\n\t\t});\n\n\t\tit(\"adds optional preamble when result has errors alone\", () => {\n\t\t\tconst result = createSuite({ children: [\n\t\t\t\tcreateTimeout(),\n\t\t\t]});\n\n\t\t\tconst renderer = TestRenderer.create();\n\t\t\tassert.equal(result.render(\"my_preamble\"),\n\t\t\t\t\"my_preamble\" +\n\t\t\t\trenderer.renderAsMultipleLines([\n\t\t\t\t\tcreateTimeout(),\n\t\t\t\t]) + \"\\n\\n\" +\n\t\t\t\trenderer.renderSummary(result),\n\t\t\t);\n\t\t});\n\n\t\tit(\"doesn't add preamble when result has no marks or errors\", () => {\n\t\t\tconst result = createSuite();\n\n\t\t\tconst renderer = TestRenderer.create();\n\t\t\tassert.equal(result.render(\"my_preamble\"),\n\t\t\t\trenderer.renderSummary(result),\n\t\t\t);\n\t\t});\n\n\t});\n\n\n\tdescribe(\"test case\", ({ it }) => {\n\n\t\tit(\"passing tests have a name, status, and mark\", () => {\n\t\t\tconst result = createPass({ name: \"my name\" });\n\t\t\tconst noneMark = createPass({ mark: TestMark.none });\n\t\t\tconst skipMark = createPass({ mark: TestMark.skip });\n\t\t\tconst onlyMark = createPass({ mark: TestMark.only });\n\n\t\t\tassert.deepEqual(result.name, [ \"my name\" ], \"name\");\n\t\t\tassert.equal(result.status, TestStatus.pass, \"status\");\n\n\t\t\tassert.equal(result.mark, TestMark.none, \"mark\");\n\t\t\tassert.equal(noneMark.mark, TestMark.none, \"mark\");\n\t\t\tassert.equal(skipMark.mark, TestMark.skip, \"mark\");\n\t\t\tassert.equal(onlyMark.mark, TestMark.only, \"mark\");\n\t\t});\n\n\t\tit(\"name can include parent suites\", () => {\n\t\t\tconst test = createPass({ name: [ \"parent\", \"child\", \"grandchild\" ] });\n\t\t\tassert.deepEqual(test.name, [ \"parent\", \"child\", \"grandchild\" ]);\n\t\t});\n\n\t\tit(\"has optional filename\", () => {\n\t\t\tconst test = createPass({ filename: \"my_filename\" });\n\t\t\tassert.equal(test.filename, \"my_filename\");\n\t\t});\n\n\t\tit(\"failing tests have a name, status, mark, and error\", () => {\n\t\t\tconst result = createFail({ name: \"my name\", error: new Error(\"my error\") });\n\t\t\tconst noneMark = createFail({ mark: TestMark.none });\n\t\t\tconst skipMark = createFail({ mark: TestMark.skip });\n\t\t\tconst onlyMark = createFail({ mark: TestMark.only });\n\n\t\t\tassert.deepEqual(result.name, [ \"my name\" ], \"name\");\n\t\t\tassert.equal(result.status, TestStatus.fail, \"status\");\n\t\t\tassert.equal((result.error as Error).message, \"my error\", \"error\");\n\n\t\t\tassert.equal(result.mark, TestMark.none, \"mark\");\n\t\t\tassert.equal(noneMark.mark, TestMark.none, \"mark\");\n\t\t\tassert.equal(skipMark.mark, TestMark.skip, \"mark\");\n\t\t\tassert.equal(onlyMark.mark, TestMark.only, \"mark\");\n\t\t});\n\n\t\tit(\"failing tests can have a string for the error\", () => {\n\t\t\tconst result = createFail({ name: \"irrelevant name\", error: \"my error\" });\n\t\t\tassert.equal(result.error, \"my error\");\n\t\t});\n\n\t\tit(\"skipped tests have a name, status, and mark\", () => {\n\t\t\tconst result = createSkip({ name: \"my name\" });\n\t\t\tconst noneMark = createSkip({ mark: TestMark.none });\n\t\t\tconst skipMark = createSkip({ mark: TestMark.skip });\n\t\t\tconst onlyMark = createSkip({ mark: TestMark.only });\n\n\t\t\tassert.deepEqual(result.name, [ \"my name\" ], \"name\");\n\t\t\tassert.equal(result.status, TestStatus.skip, \"status\");\n\n\t\t\tassert.equal(result.mark, TestMark.none, \"mark\");\n\t\t\tassert.equal(noneMark.mark, TestMark.none, \"mark\");\n\t\t\tassert.equal(skipMark.mark, TestMark.skip, \"mark\");\n\t\t\tassert.equal(onlyMark.mark, TestMark.only, \"mark\");\n\t\t});\n\n\t\tit(\"timeout tests have name, status, mark, and timeout\", () => {\n\t\t\tconst result = createTimeout({ name: \"my name\", timeout: 999 });\n\t\t\tconst noneMark = createTimeout({ mark: TestMark.none });\n\t\t\tconst skipMark = createTimeout({ mark: TestMark.skip });\n\t\t\tconst onlyMark = createTimeout({ mark: TestMark.only });\n\n\t\t\tassert.deepEqual(result.name, [ \"my name\" ], \"name\");\n\t\t\tassert.equal(result.status, TestStatus.timeout, \"status\");\n\t\t\tassert.equal(result.timeout, 999);\n\n\t\t\tassert.equal(result.mark, TestMark.none, \"mark\");\n\t\t\tassert.equal(noneMark.mark, TestMark.none, \"mark\");\n\t\t\tassert.equal(skipMark.mark, TestMark.skip, \"mark\");\n\t\t\tassert.equal(onlyMark.mark, TestMark.only, \"mark\");\n\t\t});\n\n\t\tit(\"can be compared using equals()\", () => {\n\t\t\tassert.dotEquals(createPass({ name: \"my name\" }), createPass({ name: \"my name\" }));\n\t\t\tassert.dotEquals(createPass({ name: [ \"parent\", \"child\" ] }), createPass({ name: [ \"parent\", \"child\" ] }));\n\n\t\t\t// disregard stack when comparing errors: if name is equal, error is equal\n\t\t\tassert.dotEquals(\n\t\t\t\tcreateFail({ name: \"my name\", error: new Error(\"my error\") }),\n\t\t\t\tcreateFail({ name: \"my name\", error: new Error(\"my error\") }),\n\t\t\t);\n\n\t\t\tassert.notDotEquals(createPass({ name: \"my name\" }), createPass({ name: \"different\" }));\n\t\t\tassert.notDotEquals(createPass({ name: [ \"parent\", \"child\" ] }), createPass({ name: [ \"parent\", \"different\" ] }));\n\t\t\tassert.notDotEquals(createPass({ name: \"my name\" }), createSkip({ name: \"my name\" }));\n\t\t\tassert.notDotEquals(createPass({ name: \"my name\" }), createFail({ name: \"my name\", error: new Error() }));\n\t\t\tassert.notDotEquals(\n\t\t\t\tcreateTimeout({ name: \"my name\", timeout: 1 }),\n\t\t\t\tcreateTimeout({ name: \"my name\", timeout: 2 }),\n\t\t\t);\n\n\t\t\t// marks\n\t\t\tassert.dotEquals(createPass({ mark: TestMark.skip }), createPass({ mark: TestMark.skip }));\n\t\t\tassert.notDotEquals(createPass({ mark: TestMark.skip }), createPass({ mark: TestMark.none }));\n\t\t});\n\n\t});\n\n\n\tdescribe(\"test case rendering\", ({ it }) => {\n\n\t\tit(\"renders test case as character, single line, or multi-line\", () => {\n\t\t\tconst renderer = TestRenderer.create();\n\t\t\tconst result = createPass();\n\n\t\t\tassert.equal(result.renderAsCharacter(), renderer.renderAsCharacters(result));\n\t\t\tassert.equal(result.renderAsSingleLine(), renderer.renderAsSingleLines(result));\n\t\t\tassert.equal(result.renderAsMultipleLines(), renderer.renderAsMultipleLines(result));\n\t\t});\n\n\t});\n\n\n\tdescribe(\"flattening\", ({ it }) => {\n\n\t\tit(\"flattens all test results into a single list\", () => {\n\t\t\tconst suite = createSuite({ children: [\n\t\t\t\tcreatePass(),\n\t\t\t\tcreateSkip(),\n\t\t\t\tcreateFail({ name: \"fail 1\" }),\n\t\t\t\tcreateSuite({ children: [\n\t\t\t\t\tcreateTimeout({ name: \"timeout\" }),\n\t\t\t\t\tcreateFail({ name: \"fail 2\" }),\n\t\t\t\t]}),\n\t\t\t]});\n\n\t\t\tassert.deepEqual(suite.allTests(), [\n\t\t\t\tcreatePass(),\n\t\t\t\tcreateSkip(),\n\t\t\t\tcreateFail({ name: \"fail 1\" }),\n\t\t\t\tcreateTimeout({ name: \"timeout\" }),\n\t\t\t\tcreateFail({ name: \"fail 2\" }),\n\t\t\t]);\n\t\t});\n\n\t\tit(\"flattens tests with requested statuses into a single list\", () => {\n\t\t\tconst suite = createSuite({ children: [\n\t\t\t\tcreatePass(),\n\t\t\t\tcreateSkip(),\n\t\t\t\tcreateFail({ name: \"fail 1\" }),\n\t\t\t\tcreateSuite({ children: [\n\t\t\t\t\tcreateTimeout({ name: \"timeout\" }),\n\t\t\t\t\tcreateFail({ name: \"fail 2\" }),\n\t\t\t\t]}),\n\t\t\t]});\n\n\t\t\tassert.deepEqual(suite.allMatchingTests(TestStatus.fail), [\n\t\t\t\tcreateFail({ name: \"fail 1\" }),\n\t\t\t\tcreateFail({ name: \"fail 2\" }),\n\t\t\t], \"one status\");\n\n\t\t\tassert.deepEqual(suite.allMatchingTests(TestStatus.fail, TestStatus.timeout), [\n\t\t\t\tcreateFail({ name: \"fail 1\" }),\n\t\t\t\tcreateTimeout({ name: \"timeout\" }),\n\t\t\t\tcreateFail({ name: \"fail 2\" }),\n\t\t\t], \"multiple statuses\");\n\t\t});\n\n\n\t\tit(\"flattens all marked results into a single list\", () => {\n\t\t\tconst suite = createSuite({ children: [\n\t\t\t\tcreatePass({ name: \"test 0.1\", mark: TestMark.none }),\n\t\t\t\tcreatePass({ name: \"test 0.2\", mark: TestMark.skip }),\n\t\t\t\tcreatePass({ name: \"test 0.3\", mark: TestMark.only }),\n\t\t\t\tcreateSuite({ name: \"suite 1\", mark: TestMark.only, children: [\n\t\t\t\t\tcreatePass({ name: \"test 1.1\", mark: TestMark.only }),\n\t\t\t\t\tcreatePass({ name: \"test 1.2\", mark: TestMark.skip }),\n\t\t\t\t\tcreateSuite({ name: \"suite 1.1\", mark: TestMark.none, children: [\n\t\t\t\t\t\tcreatePass({ name: \"test 1.1.1\", mark: TestMark.skip }),\n\t\t\t\t\t]}),\n\t\t\t\t\tcreateSuite({ name: \"suite 1.2\", mark: TestMark.skip }),\n\t\t\t\t\tcreatePass({ name: \"test 1.3\", mark: TestMark.none }),\n\t\t\t\t]}),\n\t\t\t]});\n\n\t\t\tassert.deepEqual(suite.allMarkedResults(), [\n\t\t\t\tcreatePass({ name: \"test 0.2\", mark: TestMark.skip }),\n\t\t\t\tcreatePass({ name: \"test 0.3\", mark: TestMark.only }),\n\t\t\t\tcreateSuite({ name: \"suite 1\", mark: TestMark.only, children: [\n\t\t\t\t\tcreatePass({ name: \"test 1.1\", mark: TestMark.only }),\n\t\t\t\t\tcreatePass({ name: \"test 1.2\", mark: TestMark.skip }),\n\t\t\t\t\t\tcreateSuite({ name: \"suite 1.1\", mark: TestMark.none, children: [\n\t\t\t\t\t\t\tcreatePass({ name: \"test 1.1.1\", mark: TestMark.skip }),\n\t\t\t\t\t\t]}),\n\t\t\t\t\t\tcreateSuite({ name: \"suite 1.2\", mark: TestMark.skip }),\n\t\t\t\t\tcreatePass({ name: \"test 1.3\", mark: TestMark.none }),\n\t\t\t\t]}),\n\t\t\t\tcreatePass({ name: \"test 1.1\", mark: TestMark.only }),\n\t\t\t\tcreatePass({ name: \"test 1.2\", mark: TestMark.skip }),\n\t\t\t\tcreatePass({ name: \"test 1.1.1\", mark: TestMark.skip }),\n\t\t\t\tcreateSuite({ name: \"suite 1.2\", mark: TestMark.skip }),\n\t\t\t]);\n\t\t});\n\n\t\tit(\"includes parent suite\", () => {\n\t\t\tconst suite = createSuite({ mark: TestMark.skip });\n\n\t\t\tassert.deepEqual(suite.allMarkedResults(), [ createSuite({ mark: TestMark.skip }) ]);\n\t\t});\n\n\t\tit(\"flattens results with requested marks into a single list\", () => {\n\t\t\tconst suite = createSuite({ children: [\n\t\t\t\tcreatePass({ name: \"test 0.1\", mark: TestMark.none }),\n\t\t\t\tcreatePass({ name: \"test 0.2\", mark: TestMark.skip }),\n\t\t\t\tcreatePass({ name: \"test 0.3\", mark: TestMark.only }),\n\t\t\t\tcreateSuite({ name: \"suite 1\", mark: TestMark.only, children: [\n\t\t\t\t\tcreatePass({ name: \"test 1.1\", mark: TestMark.only }),\n\t\t\t\t\tcreatePass({ name: \"test 1.2\", mark: TestMark.skip }),\n\t\t\t\t\tcreatePass({ name: \"test 1.3\", mark: TestMark.none }),\n\t\t\t\t]}),\n\t\t\t]});\n\n\t\t\tassert.deepEqual(suite.allMatchingMarks(TestMark.skip), [\n\t\t\t\tcreatePass({ name: \"test 0.2\", mark: TestMark.skip }),\n\t\t\t\tcreatePass({ name: \"test 1.2\", mark: TestMark.skip }),\n\t\t\t], \".skip\");\n\n\t\t\tassert.deepEqual(suite.allMatchingMarks(TestMark.only), [\n\t\t\t\tcreatePass({ name: \"test 0.3\", mark: TestMark.only }),\n\t\t\t\tcreateSuite({ name: \"suite 1\", mark: TestMark.only, children: [\n\t\t\t\t\tcreatePass({ name: \"test 1.1\", mark: TestMark.only }),\n\t\t\t\t\tcreatePass({ name: \"test 1.2\", mark: TestMark.skip }),\n\t\t\t\t\tcreatePass({ name: \"test 1.3\", mark: TestMark.none }),\n\t\t\t\t]}),\n\t\t\t\tcreatePass({ name: \"test 1.1\", mark: TestMark.only }),\n\t\t\t], \".only\");\n\t\t});\n\n\t});\n\n\n\tdescribe(\"passing test files\", ({ it }) => {\n\n\t\tit(\"provides names of files that have all passing tests\", () => {\n\t\t\tconst suite = createSuite({ children: [\n\t\t\t\tcreatePass({ filename: \"file2\" }),\n\t\t\t]});\n\t\t\tassert.deepEqual(suite.allPassingFiles(), [ \"file2\" ]);\n\t\t});\n\n\t\tit(\"does not include filenames more than once\", () => {\n\t\t\tconst suite = createSuite({ children: [\n\t\t\t\tcreatePass({ filename: \"my_file\" }),\n\t\t\t\tcreatePass({ filename: \"my_file\" }),\n\t\t\t]});\n\t\t\tassert.deepEqual(suite.allPassingFiles(), [ \"my_file\" ]);\n\t\t});\n\n\t\tit(\"does not include filenames of failing tests\", () => {\n\t\t\tconst suite = createSuite({ children: [\n\t\t\t\tcreatePass({ filename: \"my_file1\" }),\n\t\t\t\tcreateFail({ filename: \"my_file2\" }),\n\t\t\t]});\n\t\t\tassert.deepEqual(suite.allPassingFiles(), [ \"my_file1\" ]);\n\t\t});\n\n\t\tit(\"does not include filenames of skipped tests\", () => {\n\t\t\tconst suite = createSuite({ children: [\n\t\t\t\tcreatePass({ filename: \"my_file1\" }),\n\t\t\t\tcreateSkip({ filename: \"my_file2\" }),\n\t\t\t]});\n\t\t\tassert.deepEqual(suite.allPassingFiles(), [ \"my_file1\" ]);\n\t\t});\n\n\t\tit(\"does not include filenames of timed out tests\", () => {\n\t\t\tconst suite = createSuite({ children: [\n\t\t\t\tcreatePass({ filename: \"my_file1\" }),\n\t\t\t\tcreateTimeout({ filename: \"my_file2\" }),\n\t\t\t]});\n\n\t\t\tassert.deepEqual(suite.allPassingFiles(), [ \"my_file1\" ]);\n\t\t});\n\n\t\tit(\"[bugfix] does not include filenames of failing tests even when sibling tests pass\", () => {\n\t\t\t// Including filename in every test suite has resulted in tests being marked as 'pass' when they were 'fail'\n\n\t\t\tconst suite = createSuite({ children: [\n\t\t\t\tcreateSuite({ filename: \"my_file\", children: [\n\t\t\t\t\tcreatePass({ filename: \"my_file\" }),\n\t\t\t\t\tcreateFail({ filename: \"my_file\" }),\n\t\t\t\t]}),\n\t\t\t]});\n\n\t\t\tassert.deepEqual(suite.allPassingFiles(), []);\n\t\t});\n\n\t});\n\n\n\tdescribe(\"summarization\", ({ it }) => {\n\n\t\tit(\"provides test count\", () => {\n\t\t\tconst suite = createSuite({ children: [\n\t\t\t\tcreatePass(),\n\t\t\t\tcreateFail(),\n\t\t\t\tcreateFail(),\n\t\t\t\tcreateSkip(),\n\t\t\t\tcreateSkip(),\n\t\t\t\tcreateSkip(),\n\t\t\t\tcreateTimeout(),\n\t\t\t\tcreateTimeout(),\n\t\t\t\tcreateTimeout(),\n\t\t\t\tcreateTimeout(),\n\t\t\t]});\n\n\t\t\tassert.deepEqual(suite.count(), {\n\t\t\t\t[TestStatus.pass]: 1,\n\t\t\t\t[TestStatus.fail]: 2,\n\t\t\t\t[TestStatus.skip]: 3,\n\t\t\t\t[TestStatus.timeout]: 4,\n\t\t\t\ttotal: 10,\n\t\t\t});\n\t\t});\n\n\t\tit(\"counts tests in sub-suites\", () => {\n\t\t\tconst suite = createSuite({ children: [\n\t\t\t\tcreatePass(),\n\t\t\t\tcreateFail(),\n\t\t\t\tcreateSuite({ children: [\n\t\t\t\t\tcreateFail(),\n\t\t\t\t\tcreateFail(),\n\t\t\t\t\tcreateSkip(),\n\t\t\t\t]}),\n\t\t\t]});\n\n\t\t\tassert.deepEqual(suite.count(), {\n\t\t\t\t[TestStatus.pass]: 1,\n\t\t\t\t[TestStatus.fail]: 3,\n\t\t\t\t[TestStatus.skip]: 1,\n\t\t\t\t[TestStatus.timeout]: 0,\n\t\t\t\ttotal: 5,\n\t\t\t});\n\t\t});\n\n\t});\n\n\n\tdescribe(\"serialization and deserialization\", ({ it }) => {\n\n\t\tit(\"can be serialized and deserialized\", () => {\n\t\t\tconst suite = createSuite({ children: [\n\t\t\t\tcreatePass({ name: \"pass\", mark: TestMark.none }),\n\t\t\t\tcreateSkip({ name: \"skip\", mark: TestMark.skip }),\n\t\t\t\tcreateFail({ name: \"fail\", mark: TestMark.only }),\n\t\t\t\tcreateTimeout({ name: \"timeout\" }),\n\t\t\t\tcreateSuite({ name: \"child\", mark: TestMark.skip, children: [\n\t\t\t\t\tcreatePass({ name: [ \"child\", \"child pass\" ]}),\n\t\t\t\t]}),\n\t\t\t]});\n\n\t\t\tconst serialized = suite.serialize();\n\t\t\tconst deserialized = TestResult.deserialize(serialized);\n\n\t\t\tassert.dotEquals(deserialized, suite);\n\t\t});\n\n\t\tit(\"handles string errors\", () => {\n\t\t\tconst test = createFail({ error: \"my error\" });\n\n\t\t\tconst serialized = test.serialize();\n\t\t\tassert.dotEquals(TestResult.deserialize(serialized), test);\n\t\t});\n\n\t\tit(\"handles assertion errors\", () => {\n\t\t\tconst error = new AssertionError({\n\t\t\t\tmessage: \"my message\",\n\t\t\t\tactual: \"my actual\",\n\t\t\t\texpected: \"my expected\",\n\t\t\t\toperator: \"my operator\",\n\t\t\t});\n\n\t\t\tconst test = createFail({ error });\n\t\t\tconst serialized = test.serialize();\n\t\t\tconst deserialized = TestResult.deserialize(serialized) as TestCaseResult;\n\n\t\t\tassert.deepEqual(deserialized.error, error);\n\t\t\tassert.equal((deserialized.error as Error).stack, error.stack);\n\t\t});\n\n\t\tit(\"handles other errors\", () => {\n\t\t\tconst error = new Error(\"my message\");\n\n\t\t\tconst test = createFail({ error });\n\t\t\tconst serialized = test.serialize();\n\t\t\tconst deserialized = TestResult.deserialize(serialized) as TestCaseResult;\n\n\t\t\tassert.deepEqual(deserialized.error, error);\n\t\t\tassert.equal((deserialized.error as Error).stack, error.stack);\n\t\t});\n\n\t\tit(\"propagates custom fields\", () => {\n\t\t\tinterface MyError extends Error {\n\t\t\t\tcustom1: string,\n\t\t\t\tcustom2: string,\n\t\t\t}\n\n\t\t\tconst error = new Error(\"my message\") as MyError;\n\t\t\terror.custom1 = \"custom1\";\n\t\t\terror.custom2 = \"custom2\";\n\n\t\t\tconst test = createFail({ error });\n\t\t\tconst serialized = test.serialize();\n\t\t\tconst deserialized = TestResult.deserialize(serialized) as TestCaseResult;\n\n\t\t\tassert.deepEqual(deserialized.error, error);\n\t\t\tassert.equal((deserialized.error as Error).stack, error.stack);\n\t\t});\n\n\t});\n\n});\n\nfunction createSuite({\n\tname = \"irrelevant name\",\n\tchildren = [],\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\tchildren?: TestResult[],\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\treturn TestResult.suite(name, children, filename, mark);\n}\n\nfunction createPass({\n\tname = \"irrelevant name\",\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\treturn TestResult.pass(name, filename, mark);\n}\n\nfunction createFail({\n\tname = \"irrelevant name\",\n\terror = new Error(\"irrelevant error\"),\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\terror?: string | Error,\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\treturn TestResult.fail(name, error, filename, mark);\n}\n\nfunction createSkip({\n\tname = \"irrelevant name\",\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\treturn TestResult.skip(name, filename, mark);\n}\n\nfunction createTimeout({\n\tname = \"irrelevant name\",\n\ttimeout = 42,\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\ttimeout?: number,\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\treturn TestResult.timeout(name, timeout, filename, mark);\n}"],"names":["assert","test","AssertionError","TestMark","TestResult","TestStatus","TestRenderer","describe","it","list","createPass","name","result","suite","deepEqual","children","createSuite","filename","equal","notSpecified","none","mark","skip","only","dotEquals","notDotEquals","fail","createFail","createSkip","createTimeout","renderer","create","render","renderMarksAsLines","renderAsMultipleLines","renderSummary","noneMark","skipMark","onlyMark","status","pass","error","Error","message","timeout","renderAsCharacter","renderAsCharacters","renderAsSingleLine","renderAsSingleLines","allTests","allMatchingTests","allMarkedResults","allMatchingMarks","allPassingFiles","count","total","serialized","serialize","deserialized","deserialize","actual","expected","operator","stack","custom1","custom2","undefined"],"mappings":"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"}