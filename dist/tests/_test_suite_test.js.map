{"version":3,"sources":["/Users/jshore/Documents/Projects/ergotest/src/tests/_test_suite_test.ts"],"sourcesContent":["// Copyright Titanium I.T. LLC. License granted under terms of \"The MIT License.\"\nimport { assert, describe, it, test } from \"../tests.js\";\nimport {\n\tafterAll as afterAll_sut,\n\tafterEach as afterEach_sut,\n\tbeforeAll as beforeAll_sut,\n\tbeforeEach as beforeEach_sut,\n\tdescribe as describe_sut,\n\tit as it_sut,\n\ttest as test_sut,\n\tTestSuite,\n} from \"./test_suite.js\";\nimport { Clock } from \"../infrastructure/clock.js\";\nimport { TestCaseResult, TestMark, TestMarkValue, TestResult, TestStatus } from \"./test_result.js\";\nimport path from \"node:path\";\n// dependency: ./_module_passes.js\n// dependency: ./_module_throws.js\n// dependency: ./_module_no_export.js\n\n// Tests for my test library. (How meta.)\n\nconst SUCCESS_MODULE_PATH = path.resolve(import.meta.dirname, \"./_module_passes.js\");\nconst THROWS_MODULE_PATH = path.resolve(import.meta.dirname, \"./_module_throws.js\");\nconst NO_EXPORT_MODULE_PATH = path.resolve(import.meta.dirname, \"./_module_no_export.js\");\n\nconst IRRELEVANT_NAME = \"irrelevant name\";\nconst DEFAULT_TIMEOUT = TestSuite.DEFAULT_TIMEOUT_IN_MS;\nexport default test(() => {\n\n\tdescribe(\"test modules\", () => {\n\n\t\tit(\"creates test suite from a module (and sets filename on result)\", async () => {\n\t\t\tconst suite = await TestSuite.fromModulesAsync([ SUCCESS_MODULE_PATH, SUCCESS_MODULE_PATH ]);\n\n\t\t\tconst testCaseResult = TestResult.pass(\"passes\", SUCCESS_MODULE_PATH);\n\t\t\tassert.dotEquals(await suite.runAsync(),\n\t\t\t\tTestResult.suite([], [\n\t\t\t\t\tTestResult.suite([], [ testCaseResult ], SUCCESS_MODULE_PATH),\n\t\t\t\t\tTestResult.suite([], [ testCaseResult ], SUCCESS_MODULE_PATH),\n\t\t\t\t]),\n\t\t\t);\n\t\t});\n\n\t\tit(\"fails gracefully if module isn't an absolute path\", async () => {\n\t\t\tconst suite = await TestSuite.fromModulesAsync([ \"./_module_passes.js\" ]);\n\t\t\tconst result = (await suite.runAsync()).allTests()[0];\n\n\t\t\tassert.equal(result.name, [ \"error when importing _module_passes.js\" ]);\n\t\t\tassert.isUndefined(result.filename);\n\t\t\tassert.equal(result.status, TestStatus.fail);\n\t\t\tassert.equal(result.error, \"Test module filenames must use absolute paths: ./_module_passes.js\");\n\t\t});\n\n\t\tit(\"fails gracefully if module doesn't exist\", async () => {\n\t\t\tconst suite = await TestSuite.fromModulesAsync([ \"/no_such_module.js\" ]);\n\t\t\tconst result = (await suite.runAsync()).allTests()[0];\n\n\t\t\tassert.equal(result.name, [ \"error when importing no_such_module.js\" ]);\n\t\t\tassert.equal(result.filename, \"/no_such_module.js\");\n\t\t\tassert.equal(result.status, TestStatus.fail);\n\t\t\tassert.equal(result.error, `Test module not found: /no_such_module.js`);\n\t\t});\n\n\t\tit(\"fails gracefully if module fails to require()\", async () => {\n\t\t\tconst suite = await TestSuite.fromModulesAsync([ THROWS_MODULE_PATH ]);\n\t\t\tconst result = (await suite.runAsync()).allTests()[0];\n\n\t\t\tassert.equal(result.name, [ \"error when importing _module_throws.js\" ]);\n\t\t\tassert.equal(result.filename, THROWS_MODULE_PATH);\n\t\t\tassert.equal(result.status, TestStatus.fail);\n\t\t\tassert.match((result.error as { message: string }).message, /my require error/);\n\t\t});\n\n\t\tit(\"fails gracefully if module doesn't export a test suite\", async () => {\n\t\t\tconst suite = await TestSuite.fromModulesAsync([ NO_EXPORT_MODULE_PATH ]);\n\t\t\tconst result = (await suite.runAsync()).allTests()[0];\n\n\t\t\tassert.equal(result.name, [ \"error when importing _module_no_export.js\" ]);\n\t\t\tassert.equal(result.filename, NO_EXPORT_MODULE_PATH);\n\t\t\tassert.equal(result.status, TestStatus.fail);\n\t\t\tassert.equal(result.error, `Test module doesn't export a test suite: ${NO_EXPORT_MODULE_PATH}`);\n\t\t});\n\n\t});\n\n\n\tdescribe(\"test suites\", () => {\n\n\t\tit(\"executes immediately (but tests don't)\", () => {\n\t\t\tlet suiteRan = false;\n\t\t\tlet testRan = false;\n\t\t\ttest_sut(() => {\n\t\t\t\tsuiteRan = true;\n\t\t\t\tit_sut(IRRELEVANT_NAME, () => {\n\t\t\t\t\ttestRan = true;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tassert.equal(suiteRan, true, \"should run suite\");\n\t\t\tassert.equal(testRan, false, \"should not run test\");\n\t\t});\n\n\t\tit(\"returns test results when run\", async () => {\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tit_sut(\"test 1\", () => {});\n\t\t\t\tit_sut(\"test 2\", () => {});\n\t\t\t\tit_sut(\"test 3\", () => {});\n\t\t\t});\n\n\t\t\tconst result = await suite.runAsync();\n\t\t\tassert.dotEquals(result,\n\t\t\t\tTestResult.suite([], [\n\t\t\t\t\tTestResult.pass(\"test 1\"),\n\t\t\t\t\tTestResult.pass(\"test 2\"),\n\t\t\t\t\tTestResult.pass(\"test 3\"),\n\t\t\t\t]),\n\t\t\t);\n\t\t});\n\n\t\tit(\"can be nested\", async () => {\n\t\t\tconst top = test_sut(\"top\", () => {\n\t\t\t\tdescribe_sut(\"middle\", () => {\n\t\t\t\t\tdescribe_sut(\"bottom\", () => {\n\t\t\t\t\t\tit_sut(\"my test\", () => {});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst result = await top.runAsync();\n\t\t\tassert.dotEquals(result,\n\t\t\t\tTestResult.suite(\"top\", [\n\t\t\t\t\tTestResult.suite([ \"top\", \"middle\" ], [\n\t\t\t\t\t\tTestResult.suite([ \"top\", \"middle\", \"bottom\" ], [\n\t\t\t\t\t\t\tTestResult.pass([ \"top\", \"middle\", \"bottom\", \"my test\" ]),\n\t\t\t\t\t\t]),\n\t\t\t\t\t]),\n\t\t\t\t]),\n\t\t\t);\n\t\t});\n\n\t\tit(\"retains correct context as nesting expands and contracts\", async () => {\n\t\t\tconst top = test_sut(\"top\", () => {\n\t\t\t\tit_sut(\"top.1\", () => {});\n\t\t\t\tdescribe_sut(\"middle\", () => {\n\t\t\t\t\tit_sut(\"middle.1\", () => {});\n\t\t\t\t\tdescribe_sut(\"bottom\", () => {\n\t\t\t\t\t\tit_sut(\"bottom.1\", () => {});\n\t\t\t\t\t});\n\t\t\t\t\tit_sut(\"middle.2\", () => {});\n\t\t\t\t});\n\t\t\t\tit_sut(\"top.2\", () => {});\n\t\t\t});\n\n\t\t\tassert.dotEquals(await top.runAsync(),\n\t\t\t\tTestResult.suite(\"top\", [\n\t\t\t\t\tTestResult.pass([ \"top\", \"top.1\" ]),\n\t\t\t\t\tTestResult.suite([ \"top\", \"middle\" ], [\n\t\t\t\t\t\tTestResult.pass([ \"top\", \"middle\", \"middle.1\" ]),\n\t\t\t\t\t\tTestResult.suite([ \"top\", \"middle\", \"bottom\" ], [\n\t\t\t\t\t\t\tTestResult.pass([ \"top\", \"middle\", \"bottom\", \"bottom.1\" ]),\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tTestResult.pass([ \"top\", \"middle\", \"middle.2\" ]),\n\t\t\t\t\t]),\n\t\t\t\t\tTestResult.pass([ \"top\", \"top.2\" ]),\n\t\t\t\t]),\n\t\t\t);\n\t\t});\n\n\t\tit(\"retains correct context even if a nested describe block throws an exception\", async () => {\n\t\t\tconst parent = test_sut(\"parent\", () => {\n\t\t\t\tit_sut(\"parent.1\", () => {});\n\t\t\t\ttry {\n\t\t\t\t\tdescribe_sut(\"child\", () => {\n\t\t\t\t\t\tthrow new Error(\"my exception\");\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tcatch {\n\t\t\t\t\t// ignored\n\t\t\t\t}\n\t\t\t\tit_sut(\"parent.2\", () => {});\n\t\t\t});\n\n\t\t\tassert.dotEquals(await parent.runAsync(),\n\t\t\t\tTestResult.suite(\"parent\", [\n\t\t\t\t\tTestResult.pass([ \"parent\", \"parent.1\" ]),\n\t\t\t\t\tTestResult.pass([ \"parent\", \"parent.2\" ]),\n\t\t\t\t]),\n\t\t\t);\n\t\t});\n\n\t\tit(\"can be run multiple times\", () => {\n\t\t\ttest_sut();\n\t\t\ttest_sut();\n\t\t});\n\n\t\tit(\"can be run multiple times even if a previous run results in an exception\", () => {\n\t\t\ttry {\n\t\t\t\ttest_sut(() => {\n\t\t\t\t\tthrow new Error(\"my exception\");\n\t\t\t\t});\n\t\t\t}\n\t\t\tcatch {\n\t\t\t\t// ignored\n\t\t\t}\n\n\t\t\ttest_sut();\n\t\t});\n\n\t\tit(\"propagates filename into children's test results\", async () => {\n\t\t\tconst clock = await Clock.createNullAsync();\n\t\t\tconst filename = \"my_filename\";\n\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tit_sut(\"pass\", () => {});\n\t\t\t\tit_sut.skip(\"skip\", () => {});\n\t\t\t\tit_sut(\"fail\", () => { throw Error(\"fail\"); });\n\t\t\t\tit_sut(\"timeout\", async () => { await clock.waitAsync(DEFAULT_TIMEOUT + 1); });\n\t\t\t\tit_sut(\"test without body\");\n\t\t\t\tdescribe_sut(\"suite without body\");\n\t\t\t});\n\t\t\tsuite._setFilename(filename);\n\n\t\t\tconst actualPromise = suite.runAsync({ clock });\n\t\t\tclock.tickUntilTimersExpireAsync();\n\n\t\t\tassert.equal(await actualPromise, TestResult.suite([], [\n\t\t\t\tcreatePass({ name: \"pass\", filename }),\n\t\t\t\tcreateSkip({ name: \"skip\", mark: TestMark.skip, filename }),\n\t\t\t\tcreateFail({ name: \"fail\", error: new Error(\"fail\"), filename }),\n\t\t\t\tcreateTimeout({ name: \"timeout\", timeout: DEFAULT_TIMEOUT, filename }),\n\t\t\t\tcreateSkip({ name: \"test without body\", mark: TestMark.skip, filename }),\n\t\t\t\tcreateSuite({ name: \"suite without body\", mark: TestMark.skip, filename }),\n\t\t\t], filename));\n\t\t});\n\n\t\tit(\"fails when test() is run within test()\", () => {\n\t\t\ttest_sut(() => {\n\t\t\t\tassert.error(\n\t\t\t\t\t() => test_sut(),\n\t\t\t\t\t\"test() is not re-entrant [don't run test() inside of test()]\",\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\n\t\tit(\"fails when describe() is run outside of test()\", () => {\n\t\t\tassert.error(\n\t\t\t\t() => describe_sut(),\n\t\t\t\t\"describe() must be run inside test()\",\n\t\t\t);\n\t\t\tassert.error(\n\t\t\t\t() => describe_sut.skip(),\n\t\t\t\t\"describe() must be run inside test()\",\n\t\t\t);\n\t\t\tassert.error(\n\t\t\t\t() => describe_sut.only(),\n\t\t\t\t\"describe() must be run inside test()\",\n\t\t\t);\n\t\t});\n\n\t});\n\n\n\tdescribe(\"test cases\", () => {\n\n\t\tit(\"runs when its parent suite is run\", async () => {\n\t\t\tlet testRan = false;\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tit_sut(IRRELEVANT_NAME, () => {\n\t\t\t\t\ttestRan = true;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tassert.equal(testRan, false, \"before suite runs\");\n\t\t\tawait suite.runAsync();\n\t\t\tassert.equal(testRan, true, \"after suite runs\");\n\t\t});\n\n\t\tit(\"works with asynchronous code\", async () => {\n\t\t\tlet testRan = false;\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tit_sut(IRRELEVANT_NAME, async () => {\n\t\t\t\t\tawait new Promise<void>((resolve) => {\n\t\t\t\t\t\tsetImmediate(() => {\n\t\t\t\t\t\t\ttestRan = true;\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tawait suite.runAsync();\n\t\t\tassert.equal(testRan, true);\n\t\t});\n\n\t\tit(\"passes when test doesn't throw exception\", async () => {\n\t\t\tconst result = await runTestAsync(\"my test\", () => {});\n\t\t\tassert.dotEquals(result, TestResult.pass(\"my test\"));\n\t\t});\n\n\t\tit(\"fails when test throws exception\", async () => {\n\t\t\tconst error = new Error(\"my error\");\n\t\t\tconst result = await runTestAsync(\"my test\", () => {\n\t\t\t\tthrow error;\n\t\t\t});\n\t\t\tassert.dotEquals(result, TestResult.fail(\"my test\", error));\n\t\t});\n\n\t\tit(\"can retrieve config variables\", async () => {\n\t\t\tconst myConfig = { myConfig: \"my_config\" };\n\t\t\tlet receivedConfig;\n\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tit_sut(IRRELEVANT_NAME, ({ getConfig }) => {\n\t\t\t\t\treceivedConfig = getConfig(\"myConfig\");\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tawait suite.runAsync({ config: myConfig });\n\t\t\tassert.equal(receivedConfig, \"my_config\");\n\t\t});\n\n\t\tit(\"fails fast when no config defined\", async () => {\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tit_sut(IRRELEVANT_NAME, ({ getConfig }) => {\n\t\t\t\t\tgetConfig(\"no_such_config\");\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst results = await suite.runAsync({});\n\t\t\tassert.equal(results, TestResult.suite([], [\n\t\t\t\tTestResult.fail(IRRELEVANT_NAME, new Error(\"No test config found for name 'no_such_config'\")),\n\t\t\t]));\n\t\t});\n\n\t\tit(\"fails fast when config defined, but config variable not found\", async () => {\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tit_sut(IRRELEVANT_NAME, ({ getConfig }) => {\n\t\t\t\t\tgetConfig(\"no_such_config\");\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst results = await suite.runAsync({ config: {} });\n\t\t\tassert.equal(results, TestResult.suite([], [\n\t\t\t\tTestResult.fail(IRRELEVANT_NAME, new Error(\"No test config found for name 'no_such_config'\")),\n\t\t\t]));\n\t\t});\n\n\t\tit(\"fails when run outside of a test()\", () => {\n\t\t\tassert.error(\n\t\t\t\t() => it_sut(IRRELEVANT_NAME),\n\t\t\t\t\"it() must be run inside test()\",\n\t\t\t);\n\t\t\tassert.error(\n\t\t\t\t() => it_sut.skip(IRRELEVANT_NAME),\n\t\t\t\t\"it() must be run inside test()\",\n\t\t\t);\n\t\t\tassert.error(\n\t\t\t\t() => it_sut.only(IRRELEVANT_NAME),\n\t\t\t\t\"it() must be run inside test()\",\n\t\t\t);\n\t\t});\n\n\t});\n\n\n\tdescribe(\"naming\", () => {\n\n\t\tit(\"test suites can be created with and without a name\", async () => {\n\t\t\tconst name = test_sut(\"named\", () => {\n\t\t\t\tit_sut(\"has a name\", () => {});\n\t\t\t});\n\t\t\tconst noName = test_sut(() => {\n\t\t\t\tit_sut(\"has no name\", () => {});\n\t\t\t});\n\n\t\t\tassert.dotEquals(await name.runAsync(), TestResult.suite(\"named\", [ TestResult.pass([ \"named\", \"has a name\" ]) ]));\n\t\t\tassert.dotEquals(await noName.runAsync(), TestResult.suite([], [ TestResult.pass(\"has no name\") ]));\n\t\t});\n\n\t\tit(\"test cases without names are given a default\", async () => {\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tit_sut(\"\", () => {});\n\t\t\t});\n\n\t\t\tassert.dotEquals(await suite.runAsync(), TestResult.suite([], [ TestResult.pass(\"(unnamed)\") ]));\n\t\t});\n\n\t\tit(\"sets name of test result to include nested suites\", async () => {\n\t\t\tconst top = test_sut(\"top\", () => {\n\t\t\t\tdescribe_sut(\"middle\", () => {\n\t\t\t\t\tdescribe_sut(\"bottom\", () => {\n\t\t\t\t\t\tit_sut(\"my test\", () => {});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst result = await top.runAsync();\n\t\t\tassert.dotEquals(result,\n\t\t\t\tTestResult.suite([ \"top\" ], [\n\t\t\t\t\tTestResult.suite([ \"top\", \"middle\" ], [\n\t\t\t\t\t\tTestResult.suite([ \"top\", \"middle\", \"bottom\" ], [\n\t\t\t\t\t\t\tTestResult.pass([ \"top\", \"middle\", \"bottom\", \"my test\" ]),\n\t\t\t\t\t\t]),\n\t\t\t\t\t]),\n\t\t\t\t]),\n\t\t\t);\n\t\t});\n\n\t\tit(\"collapses unnamed suites when setting test result name\", async () => {\n\t\t\tconst top = test_sut(\"top\", () => {\n\t\t\t\tdescribe_sut(\"\", () => {\n\t\t\t\t\tdescribe_sut(\"\", () => {\n\t\t\t\t\t\tit_sut(\"my test\", () => {});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst result = await top.runAsync();\n\t\t\tassert.dotEquals(result,\n\t\t\t\tTestResult.suite(\"top\", [\n\t\t\t\t\tTestResult.suite(\"top\", [\n\t\t\t\t\t\tTestResult.suite(\"top\", [\n\t\t\t\t\t\t\tTestResult.pass([ \"top\", \"my test\" ]),\n\t\t\t\t\t\t]),\n\t\t\t\t\t]),\n\t\t\t\t]),\n\t\t\t);\n\t\t});\n\n\t});\n\n\n\tdescribe(\"before/after\", () => {\n\n\t\tit(\"runs function before and after all tests in a suite\", async () => {\n\t\t\tconst ordering: string[] = [];\n\t\t\tconst pushFn: ((message: string) => () => void) = (message: string) => {\n\t\t\t\treturn () => ordering.push(message);\n\t\t\t};\n\n\t\t\tconst suite = test_sut(IRRELEVANT_NAME, () => {\n\t\t\t\tbeforeAll_sut(pushFn(\"parent before 1\"));\n\t\t\t\tbeforeAll_sut(pushFn(\"parent before 2\"));\n\t\t\t\tafterAll_sut(pushFn(\"parent after 1\"));\n\t\t\t\tafterAll_sut(pushFn(\"parent after 2\"));\n\t\t\t\tit_sut(IRRELEVANT_NAME, pushFn(\"test 1\"));\n\t\t\t\tit_sut(IRRELEVANT_NAME, pushFn(\"test 2\"));\n\t\t\t\tdescribe_sut(IRRELEVANT_NAME, () => {\n\t\t\t\t\tbeforeAll_sut(pushFn(\"child before\"));\n\t\t\t\t\tafterAll_sut(pushFn(\"child after\"));\n\t\t\t\t\tit_sut(IRRELEVANT_NAME, pushFn(\"test 3\"));\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tawait suite.runAsync();\n\t\t\tassert.equal(ordering, [\n\t\t\t\t\"parent before 1\",\n\t\t\t\t\"parent before 2\",\n\t\t\t\t\"test 1\",\n\t\t\t\t\"test 2\",\n\t\t\t\t\"child before\",\n\t\t\t\t\"test 3\",\n\t\t\t\t\"child after\",\n\t\t\t\t\"parent after 1\",\n\t\t\t\t\"parent after 2\",\n\t\t\t]);\n\t\t});\n\n\t\tit(\"runs function before and after each test in a suite\", async () => {\n\t\t\tconst ordering: string[] = [];\n\t\t\tconst pushFn: ((message: string) => () => void) = (message) => {\n\t\t\t\treturn () => ordering.push(message);\n\t\t\t};\n\n\t\t\tconst suite = test_sut(IRRELEVANT_NAME, () => {\n\t\t\t\tbeforeEach_sut(pushFn(\"parent before 1\"));\n\t\t\t\tbeforeEach_sut(pushFn(\"parent before 2\"));\n\t\t\t\tafterEach_sut(pushFn(\"parent after 1\"));\n\t\t\t\tafterEach_sut(pushFn(\"parent after 2\"));\n\t\t\t\tit_sut(IRRELEVANT_NAME, pushFn(\"test 1\"));\n\t\t\t\tit_sut(IRRELEVANT_NAME, pushFn(\"test 2\"));\n\t\t\t\tdescribe_sut(IRRELEVANT_NAME, () => {\n\t\t\t\t\tbeforeEach_sut(pushFn(\"child before\"));\n\t\t\t\t\tafterEach_sut(pushFn(\"child after\"));\n\t\t\t\t\tit_sut(IRRELEVANT_NAME, pushFn(\"test 3\"));\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tawait suite.runAsync();\n\t\t\tassert.equal(ordering, [\n\t\t\t\t\"parent before 1\",\n\t\t\t\t\"parent before 2\",\n\t\t\t\t\"test 1\",\n\t\t\t\t\"parent after 1\",\n\t\t\t\t\"parent after 2\",\n\t\t\t\t\"parent before 1\",\n\t\t\t\t\"parent before 2\",\n\t\t\t\t\"test 2\",\n\t\t\t\t\"parent after 1\",\n\t\t\t\t\"parent after 2\",\n\t\t\t\t\"parent before 1\",\n\t\t\t\t\"parent before 2\",\n\t\t\t\t\"child before\",\n\t\t\t\t\"test 3\",\n\t\t\t\t\"child after\",\n\t\t\t\t\"parent after 1\",\n\t\t\t\t\"parent after 2\",\n\t\t\t]);\n\t\t});\n\n\t\tit(\"provides config\", async () => {\n\t\t\tconst myConfig = { myConfig: \"my_config\" };\n\t\t\tlet beforeAllReceived, beforeEachReceived, afterEachReceived, afterAllReceived;\n\n\t\t\tconst suite = test_sut(IRRELEVANT_NAME, () => {\n\t\t\t\tbeforeAll_sut(({ getConfig }) => { beforeAllReceived = getConfig(\"myConfig\"); });\n\t\t\t\tbeforeEach_sut(({ getConfig }) => { beforeEachReceived = getConfig(\"myConfig\"); });\n\t\t\t\tit_sut(IRRELEVANT_NAME, () => {});\n\t\t\t\tafterEach_sut(({ getConfig }) => { afterEachReceived = getConfig(\"myConfig\"); });\n\t\t\t\tafterAll_sut(({ getConfig }) => { afterAllReceived = getConfig(\"myConfig\"); });\n\t\t\t});\n\n\t\t\tawait suite.runAsync({ config: myConfig });\n\n\t\t\tassert.equal(beforeAllReceived, \"my_config\", \"beforeAll\");\n\t\t\tassert.equal(beforeEachReceived, \"my_config\", \"beforeEach\");\n\t\t\tassert.equal(afterEachReceived, \"my_config\", \"afterEach\");\n\t\t\tassert.equal(afterAllReceived, \"my_config\", \"afterAll\");\n\t\t});\n\n\t\tit(\"doesn't run beforeAll and afterAll when all children are skipped\", async () => {\n\t\t\tlet beforeRan = false;\n\t\t\tlet afterRan = false;\n\t\t\tconst suite = test_sut(\"my suite\", () => {\n\t\t\t\tbeforeAll_sut(() => {\n\t\t\t\t\tbeforeRan = true;\n\t\t\t\t});\n\t\t\t\tafterAll_sut(() => {\n\t\t\t\t\tafterRan = true;\n\t\t\t\t});\n\t\t\t\tit_sut.skip(\"test 1\", async () => {});\n\t\t\t\tit_sut.skip(\"test 2\", async () => {});\n\t\t\t});\n\n\t\t\tawait suite.runAsync();\n\t\t\tassert.equal(beforeRan, false, \"shouldn't run beforeAll()\");\n\t\t\tassert.equal(afterRan, false, \"shouldn't run afterAll()\");\n\t\t});\n\n\t\tit(\"doesn't run beforeEach and afterEach when the test is skipped\", async () => {\n\t\t\tlet beforeRan = false;\n\t\t\tlet afterRan = false;\n\t\t\tconst suite = test_sut(\"my suite\", () => {\n\t\t\t\tbeforeEach_sut(() => {\n\t\t\t\t\tbeforeRan = true;\n\t\t\t\t});\n\t\t\t\tafterEach_sut(() => {\n\t\t\t\t\tafterRan = true;\n\t\t\t\t});\n\t\t\t\tit_sut.skip(\"test 1\", async () => {});\n\t\t\t});\n\n\t\t\tawait suite.runAsync();\n\t\t\tassert.equal(beforeRan, false, \"shouldn't run beforeEach()\");\n\t\t\tassert.equal(afterRan, false, \"shouldn't run afterEach()\");\n\t\t});\n\n\t\tit(\"handles exception in beforeAll\", async () => {\n\t\t\tconst error = new Error(\"my error\");\n\t\t\tconst suite = test_sut(\"my suite\", () => {\n\t\t\t\tbeforeAll_sut(() => {\n\t\t\t\t\tthrow error;\n\t\t\t\t});\n\t\t\t\tit_sut(\"test 1\", async () => {});\n\t\t\t\tit_sut(\"test 2\", async () => {});\n\t\t\t});\n\n\t\t\tassert.dotEquals(await suite.runAsync(),\n\t\t\t\tcreateSuite({ name: \"my suite\", children: [\n\t\t\t\t\tcreateFail({ name: [ \"my suite\", \"beforeAll()\" ], error }),\n\t\t\t\t]}),\n\t\t\t);\n\t\t});\n\n\t\tit(\"handles exception in afterAll\", async () => {\n\t\t\tconst error = new Error(\"my error\");\n\t\t\tconst suite = test_sut(\"my suite\", () => {\n\t\t\t\tafterAll_sut(() => {\n\t\t\t\t\tthrow error;\n\t\t\t\t});\n\t\t\t\tit_sut(\"test 1\", async () => {});\n\t\t\t\tit_sut(\"test 2\", async () => {});\n\t\t\t});\n\n\t\t\tassert.dotEquals(await suite.runAsync(),\n\t\t\t\tcreateSuite({ name: \"my suite\", children: [\n\t\t\t\t\tcreatePass({ name: [ \"my suite\", \"test 1\" ]}),\n\t\t\t\t\tcreatePass({ name: [ \"my suite\", \"test 2\" ]}),\n\t\t\t\t\tcreateFail({ name: [ \"my suite\", \"afterAll()\" ], error }),\n\t\t\t\t]}),\n\t\t\t);\n\t\t});\n\n\t\tit(\"handles exception in beforeEach\", async () => {\n\t\t\tconst error = new Error(\"my error\");\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tbeforeEach_sut(() => {\n\t\t\t\t\tthrow error;\n\t\t\t\t});\n\t\t\t\tit_sut(\"test 1\", async () => {});\n\t\t\t\tit_sut(\"test 2\", async () => {});\n\t\t\t});\n\n\t\t\tassert.dotEquals(await suite.runAsync(),\n\t\t\t\tTestResult.suite([], [\n\t\t\t\t\tTestResult.fail(\"test 1\", error),\n\t\t\t\t\tTestResult.fail(\"test 2\", error),\n\t\t\t\t]),\n\t\t\t);\n\t\t});\n\n\t\tit(\"doesn't run test when beforeEach throws exception\", async () => {\n\t\t\tlet testRan = false;\n\t\t\tconst suite = test_sut(\"my suite\", () => {\n\t\t\t\tbeforeEach_sut(() => {\n\t\t\t\t\tthrow new Error();\n\t\t\t\t});\n\t\t\t\tit_sut(\"my test\", () => {\n\t\t\t\t\ttestRan = true;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tawait suite.runAsync();\n\t\t\tassert.equal(testRan, false);\n\t\t});\n\n\t\tit(\"handles exception in afterEach\", async () => {\n\t\t\tconst error = new Error(\"my error\");\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tafterEach_sut(() => {\n\t\t\t\t\tthrow error;\n\t\t\t\t});\n\t\t\t\tit_sut(\"test 1\", () => {});\n\t\t\t\tit_sut(\"test 2\", () => {});\n\t\t\t});\n\n\t\t\tassert.dotEquals(await suite.runAsync(),\n\t\t\t\tTestResult.suite([], [\n\t\t\t\t\tTestResult.fail(\"test 1\", error),\n\t\t\t\t\tTestResult.fail(\"test 2\", error),\n\t\t\t\t]),\n\t\t\t);\n\t\t});\n\n\t\tit(\"runs afterEach() even when test throws exception\", async() => {\n\t\t\tlet afterEachRan = false;\n\t\t\tconst suite = test_sut(\"my suite\", () => {\n\t\t\t\tafterEach_sut(() => {\n\t\t\t\t\tafterEachRan = true;\n\t\t\t\t});\n\t\t\t\tit_sut(\"my test\", () => {\n\t\t\t\t\tthrow new Error();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tawait suite.runAsync();\n\t\t\tassert.equal(afterEachRan, true);\n\t\t});\n\n\t\tit(\"only reports test exception when both test and afterEach throw exceptions\", async () => {\n\t\t\tconst afterEachError = new Error(\"afterEach error\");\n\t\t\tconst testError = new Error(\"test error\");\n\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tafterEach_sut(() => {\n\t\t\t\t\tthrow afterEachError;\n\t\t\t\t});\n\t\t\t\tit_sut(\"my test\", () => {\n\t\t\t\t\tthrow testError;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tassert.dotEquals(await suite.runAsync(),\n\t\t\t\tTestResult.suite([], [\n\t\t\t\t\tTestResult.fail(\"my test\", testError),\n\t\t\t\t]),\n\t\t\t);\n\t\t});\n\n\t\tit(\"fails when run outside of a test()\", () => {\n\t\t\tassert.error(\n\t\t\t\t() => beforeAll_sut(() => {}),\n\t\t\t\t\"beforeAll() must be run inside test()\",\n\t\t\t);\n\t\t\tassert.error(\n\t\t\t\t() => beforeEach_sut(() => {}),\n\t\t\t\t\"beforeEach() must be run inside test()\",\n\t\t\t);\n\t\t\tassert.error(\n\t\t\t\t() => afterAll_sut(() => {}),\n\t\t\t\t\"afterAll() must be run inside test()\",\n\t\t\t);\n\t\t\tassert.error(\n\t\t\t\t() => afterEach_sut(() => {}),\n\t\t\t\t\"afterEach() must be run inside test()\",\n\t\t\t);\n\t\t});\n\n\t});\n\n\n\tdescribe(\"timeouts\", () => {\n\n\t\tit(\"times out when test doesn't complete before default timeout\", async () => {\n\t\t\tconst clock = await Clock.createNullAsync();\n\n\t\t\tlet beforeTime = null;\n\t\t\tlet afterTime = null;\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tbeforeEach_sut(() => {\n\t\t\t\t\tbeforeTime = clock.now();\n\t\t\t\t});\n\t\t\t\tafterEach_sut(() => {\n\t\t\t\t\tafterTime = clock.now();\n\t\t\t\t});\n\t\t\t\tit_sut(\"my test\", async () => {\n\t\t\t\t\tawait clock.waitAsync(DEFAULT_TIMEOUT + 1);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst actualPromise = suite.runAsync({ clock });\n\t\t\tawait clock.tickUntilTimersExpireAsync();\n\n\t\t\tassert.dotEquals(await actualPromise,\n\t\t\t\tTestResult.suite([], [\n\t\t\t\t\tTestResult.timeout(\"my test\", DEFAULT_TIMEOUT)\n\t\t\t\t]),\n\t\t\t\t\"result\",\n\t\t\t);\n\t\t\tassert.equal(beforeTime, 0, \"beforeEach() should run immediately\");\n\t\t\tassert.equal(afterTime, DEFAULT_TIMEOUT, \"afterEach() should run as soon as it() times out\");\n\t\t});\n\n\t\tit(\"times out when beforeAll doesn't complete before default timeout\", async () => {\n\t\t\tconst clock = await Clock.createNullAsync();\n\n\t\t\tlet itTime = null;\n\t\t\tlet afterTime = null;\n\t\t\tconst suite = test_sut(\"my suite\", () => {\n\t\t\t\tbeforeAll_sut(async () => {\n\t\t\t\t\tawait clock.waitAsync(DEFAULT_TIMEOUT + 1);\n\t\t\t\t});\n\t\t\t\tafterAll_sut(() => {\n\t\t\t\t\tafterTime = clock.now();\n\t\t\t\t});\n\t\t\t\tit_sut(\"my test\", () => {\n\t\t\t\t\titTime = clock.now();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst actualPromise = suite.runAsync({ clock });\n\t\t\tawait clock.tickUntilTimersExpireAsync();\n\n\t\t\tassert.dotEquals(await actualPromise,\n\t\t\t\tTestResult.suite(\"my suite\", [\n\t\t\t\t\tTestResult.timeout([ \"my suite\", \"beforeAll()\" ], DEFAULT_TIMEOUT)\n\t\t\t\t]),\n\t\t\t\t\"result\",\n\t\t\t);\n\t\t\tassert.equal(itTime, null, \"it() should not run\");\n\t\t\tassert.equal(afterTime, null, \"afterAll() should not run\");\n\t\t});\n\n\t\tit(\"times out when afterAll doesn't complete before default timeout\", async () => {\n\t\t\tconst clock = await Clock.createNullAsync();\n\n\t\t\tlet beforeTime = null;\n\t\t\tlet itTime = null;\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tbeforeAll_sut(() => {\n\t\t\t\t\tbeforeTime = clock.now();\n\t\t\t\t});\n\t\t\t\tafterAll_sut(async () => {\n\t\t\t\t\tawait clock.waitAsync(DEFAULT_TIMEOUT + 1);\n\t\t\t\t});\n\t\t\t\tit_sut(\"test 1\", () => {\n\t\t\t\t\titTime = clock.now();\n\t\t\t\t});\n\t\t\t\tit_sut(\"test 2\", () => {});\n\t\t\t});\n\n\t\t\tconst actualPromise = suite.runAsync({ clock });\n\t\t\tawait clock.tickUntilTimersExpireAsync();\n\n\t\t\tassert.dotEquals(await actualPromise,\n\t\t\t\tTestResult.suite([], [\n\t\t\t\t\tTestResult.pass(\"test 1\"),\n\t\t\t\t\tTestResult.pass(\"test 2\"),\n\t\t\t\t\tTestResult.timeout(\"afterAll()\", DEFAULT_TIMEOUT),\n\t\t\t\t]),\n\t\t\t\t\"result\",\n\t\t\t);\n\t\t\tassert.equal(beforeTime, 0, \"beforeAll() should run immediately\");\n\t\t\tassert.equal(itTime, 0, \"it() should run immediately\");\n\t\t});\n\n\t\tit(\"times out when beforeEach doesn't complete before default timeout\", async () => {\n\t\t\tconst clock = await Clock.createNullAsync();\n\n\t\t\tlet itTime = null;\n\t\t\tlet afterTime = null;\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tbeforeEach_sut(async () => {\n\t\t\t\t\tawait clock.waitAsync(DEFAULT_TIMEOUT + 1);\n\t\t\t\t});\n\t\t\t\tafterEach_sut(() => {\n\t\t\t\t\tafterTime = clock.now();\n\t\t\t\t});\n\t\t\t\tit_sut(\"my test\", () => {\n\t\t\t\t\titTime = clock.now();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst actualPromise = suite.runAsync({ clock });\n\t\t\tawait clock.tickUntilTimersExpireAsync();\n\n\t\t\tassert.dotEquals(await actualPromise,\n\t\t\t\tTestResult.suite([], [\n\t\t\t\t\tTestResult.timeout(\"my test\", DEFAULT_TIMEOUT)\n\t\t\t\t]),\n\t\t\t\t\"result\",\n\t\t\t);\n\t\t\tassert.equal(itTime, null, \"it() should not run\");\n\t\t\tassert.equal(afterTime, null, \"afterEach() should not run\");\n\t\t});\n\n\t\tit(\"times out when afterEach doesn't complete before default timeout\", async () => {\n\t\t\tconst clock = await Clock.createNullAsync();\n\n\t\t\tlet beforeTime = null;\n\t\t\tlet itTime = null;\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tbeforeEach_sut(() => {\n\t\t\t\t\tbeforeTime = clock.now();\n\t\t\t\t});\n\t\t\t\tafterEach_sut(async () => {\n\t\t\t\t\tawait clock.waitAsync(DEFAULT_TIMEOUT + 1);\n\t\t\t\t});\n\t\t\t\tit_sut(\"my test\", () => {\n\t\t\t\t\titTime = clock.now();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst actualPromise = suite.runAsync({ clock });\n\t\t\tawait clock.tickUntilTimersExpireAsync();\n\n\t\t\tassert.dotEquals(await actualPromise,\n\t\t\t\tTestResult.suite([], [\n\t\t\t\t\tTestResult.timeout(\"my test\", DEFAULT_TIMEOUT)\n\t\t\t\t]),\n\t\t\t\t\"result\",\n\t\t\t);\n\t\t\tassert.equal(beforeTime, 0, \"beforeEach() should run immediately\");\n\t\t\tassert.equal(itTime, 0, \"it() should run immediately\");\n\t\t});\n\n\t\tit(\"times out each function separately\", async () => {\n\t\t\tconst clock = await Clock.createNullAsync();\n\t\t\tconst notQuiteTimeoutFn = async () => {\n\t\t\t\tawait clock.waitAsync(DEFAULT_TIMEOUT - 1);\n\t\t\t};\n\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tbeforeAll_sut(notQuiteTimeoutFn);\n\t\t\t\tbeforeAll_sut(notQuiteTimeoutFn);\n\t\t\t\tafterAll_sut(notQuiteTimeoutFn);\n\t\t\t\tafterAll_sut(notQuiteTimeoutFn);\n\t\t\t\tbeforeEach_sut(notQuiteTimeoutFn);\n\t\t\t\tbeforeEach_sut(notQuiteTimeoutFn);\n\t\t\t\tafterEach_sut(notQuiteTimeoutFn);\n\t\t\t\tafterEach_sut(notQuiteTimeoutFn);\n\t\t\t\tit_sut(\"test 1\", notQuiteTimeoutFn);\n\t\t\t\tit_sut(\"test 2\", notQuiteTimeoutFn);\n\t\t\t});\n\n\t\t\tconst actualPromise = suite.runAsync({ clock });\n\t\t\tawait clock.tickUntilTimersExpireAsync();\n\n\t\t\tassert.dotEquals(await actualPromise,\n\t\t\t\tTestResult.suite([], [\n\t\t\t\t\tTestResult.pass(\"test 1\"),  // all tests pass because nothing timed out\n\t\t\t\t\tTestResult.pass(\"test 2\"),\n\t\t\t\t]),\n\t\t\t);\n\t\t});\n\n\t\tit(\"allows runner to configure default timeout\", async () => {\n\t\t\tconst NEW_TIMEOUT = DEFAULT_TIMEOUT * 2;\n\n\t\t\tconst clock = await Clock.createNullAsync();\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tit_sut(\"no timeout\", async () => {\n\t\t\t\t\tawait clock.waitAsync(NEW_TIMEOUT - 1);\n\t\t\t\t});\n\t\t\t\tit_sut(\"timeout\", async () => {\n\t\t\t\t\tawait clock.waitAsync(NEW_TIMEOUT + 1);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst actualPromise = suite.runAsync({ timeout: NEW_TIMEOUT, clock });\n\t\t\tawait clock.tickUntilTimersExpireAsync();\n\n\t\t\tassert.dotEquals(\n\t\t\t\tawait actualPromise,\n\t\t\t\tTestResult.suite([], [\n\t\t\t\t\tTestResult.pass(\"no timeout\"),\n\t\t\t\t\tTestResult.timeout(\"timeout\", NEW_TIMEOUT),\n\t\t\t\t]),\n\t\t\t);\n\t\t});\n\n\t\tit(\"allows suites to configure timeout\", async () => {\n\t\t\tconst NEW_TIMEOUT = DEFAULT_TIMEOUT * 10;\n\n\t\t\tconst clock = await Clock.createNullAsync();\n\t\t\tconst notQuiteTimeoutFn = async () => {\n\t\t\t\tawait clock.waitAsync(NEW_TIMEOUT - 1);\n\t\t\t};\n\n\t\t\tconst suite = test_sut(({ setTimeout }) => {\n\t\t\t\tsetTimeout(NEW_TIMEOUT);\n\t\t\t\tbeforeAll_sut(notQuiteTimeoutFn);\n\t\t\t\tafterAll_sut(notQuiteTimeoutFn);\n\t\t\t\tbeforeEach_sut(notQuiteTimeoutFn);\n\t\t\t\tafterEach_sut(notQuiteTimeoutFn);\n\t\t\t\tit_sut(\"my test\", notQuiteTimeoutFn);\n\t\t\t});\n\n\t\t\tconst actualPromise = suite.runAsync({ clock });\n\t\t\tawait clock.tickUntilTimersExpireAsync();\n\n\t\t\tassert.dotEquals(await actualPromise,\n\t\t\t\tTestResult.suite([], [\n\t\t\t\t\tTestResult.pass(\"my test\"),\n\t\t\t\t]),\n\t\t\t);\n\t\t});\n\n\t\tit(\"inherits parent suite's timeout\", async () => {\n\t\t\tconst NEW_TIMEOUT = DEFAULT_TIMEOUT * 10;\n\n\t\t\tconst clock = await Clock.createNullAsync();\n\t\t\tconst suite = test_sut(({ setTimeout }) => {\n\t\t\t\tsetTimeout(NEW_TIMEOUT);\n\t\t\t\tdescribe_sut(() => {\n\t\t\t\t\tit_sut(\"my test\", async () => {\n\t\t\t\t\t\tawait clock.waitAsync(NEW_TIMEOUT - 1);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst actualPromise = suite.runAsync({ clock });\n\t\t\tawait clock.tickUntilTimersExpireAsync();\n\n\t\t\tassert.dotEquals(await actualPromise,\n\t\t\t\tTestResult.suite([], [\n\t\t\t\t\tTestResult.suite([], [\n\t\t\t\t\t\tTestResult.pass(\"my test\"),\n\t\t\t\t\t]),\n\t\t\t\t]),\n\t\t\t);\n\t\t});\n\n\t\t// it(\"allows nested suites to override parent timeout\");\n\t\t//\n\t\t// it(\"allows nested tests to override parent timeout\");\n\n\t});\n\n\n\tdescribe(\".skip\", () => {\n\n\t\tit(\"skips and marks tests that have no function\", async () => {\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tit_sut(\"my test\");\n\t\t\t});\n\n\t\t\tconst result = (await suite.runAsync()).allTests()[0];\n\n\t\t\tassert.dotEquals(result, createSkip({ name: \"my test\", mark: TestMark.skip }), \"should be skipped\");\n\t\t});\n\n\t\tit(\"skips and marks tests that have '.skip'\", async () => {\n\t\t\tlet testRan = false;\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tit_sut.skip(\"my test\", () => {\n\t\t\t\t\ttestRan = true;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst result = (await suite.runAsync()).allTests()[0];\n\t\t\tassert.equal(testRan, false, \"should not run test\");\n\t\t\tassert.dotEquals(result, createSkip({ name: \"my test\", mark: TestMark.skip }));\n\t\t\tassert.equal(result.mark, TestMark.skip, \"should be marked\");\n\t\t});\n\n\t\tit(\"skips suites that have no function\", async () => {\n\t\t\tconst suite = await test_sut(\"my suite\").runAsync();\n\t\t\tconst noName = await test_sut().runAsync();\n\n\t\t\tassert.dotEquals(suite, createSuite({ name: \"my suite\", mark: TestMark.skip }));\n\t\t\tassert.dotEquals(noName, createSuite({ name: [], mark: TestMark.skip }));\n\t\t});\n\n\t\tit(\"recursively skips everything within a suite that has '.skip'\", async () => {\n\t\t\tconst suite = test_sut.skip(() => {\n\t\t\t\tit_sut(\"test 1\", () => {});\n\t\t\t\tit_sut(\"test 2\", () => {});\n\t\t\t\tdescribe_sut(() => {\n\t\t\t\t\tit_sut(\"test 3\", () => {});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst result = await suite.runAsync();\n\t\t\tassert.dotEquals(result,\n\t\t\t\tcreateSuite({ mark: TestMark.skip, children: [\n\t\t\t\t\tTestResult.skip(\"test 1\"),\n\t\t\t\t\tTestResult.skip(\"test 2\"),\n\t\t\t\t\tTestResult.suite([], [\n\t\t\t\t\t\tTestResult.skip(\"test 3\"),\n\t\t\t\t\t]),\n\t\t\t\t]}),\n\t\t\t);\n\t\t});\n\n\t\tit(\"doesn't mark skipped tests and suites that aren't explicitly marked '.skip'\", async () => {\n\t\t\tconst suite = test_sut.skip(() => {\n\t\t\t\tit_sut(\"test\", () => {});\n\t\t\t\tdescribe_sut(\"suite\", () => {});\n\t\t\t});\n\n\t\t\tconst result = await suite.runAsync();\n\t\t\tassert.dotEquals(result,\n\t\t\t\tcreateSuite({ mark: TestMark.skip, children: [\n\t\t\t\t\tcreateSkip({ name: \"test\", mark: TestMark.none }),\n\t\t\t\t\tcreateSuite({ name: \"suite\", mark: TestMark.none }),\n\t\t\t\t]}),\n\t\t\t);\n\t\t});\n\n\t\tit(\"generates failure when a suite is marked 'only' but has no body\", async () => {\n\t\t\tconst suite = test_sut.only(\"my suite\");\n\n\t\t\tconst result = await suite.runAsync();\n\t\t\tassert.dotEquals(result,\n\t\t\t\tcreateSuite({ name: \"my suite\", mark: TestMark.only, children: [\n\t\t\t\t\tcreateFail({ name: \"my suite\", error: \"Test suite is marked '.only', but it has no body\" }),\n\t\t\t\t]}),\n\t\t\t);\n\t\t});\n\n\t\tit(\"generates failure when a test is marked 'only' but has no body\", async () => {\n\t\t\tconst suite = test_sut(\"my suite\", () => {\n\t\t\t\tit_sut.only(\"my test\");\n\t\t\t});\n\n\t\t\tconst result = await suite.runAsync();\n\t\t\tassert.dotEquals(result,\n\t\t\t\tcreateSuite({ name: \"my suite\", children: [\n\t\t\t\t\tcreateFail({\n\t\t\t\t\t\tname: [ \"my suite\", \"my test\" ],\n\t\t\t\t\t\terror: \"Test is marked '.only', but it has no body\",\n\t\t\t\t\t\tmark: TestMark.only,\n\t\t\t\t\t}),\n\t\t\t\t]}),\n\t\t\t);\n\t\t});\n\n\t});\n\n\n\tdescribe(\".only\", () => {\n\n\t\tit(\"if any tests are marked .only, it only runs those tests\", async () => {\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tit_sut.only(\".only\", () => {});\n\t\t\t\tit_sut(\"not .only\", () => {});\n\t\t\t});\n\n\t\t\tassert.equal(await suite.runAsync(),\n\t\t\t\tcreateSuite({ children: [\n\t\t\t\t\tcreatePass({ name: \".only\", mark: TestMark.only }),\n\t\t\t\t\tcreateSkip({ name: \"not .only\" }),\n\t\t\t\t]}),\n\t\t\t);\n\t\t});\n\n\t\tit(\"marks test results as '.only'\", async () => {\n\t\t\tconst clock = await Clock.createNullAsync();\n\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tit_sut.only(\"pass\", () => {});\n\t\t\t\tit_sut.only(\"fail\", () => { throw new Error(\"my error\"); });\n\t\t\t\tit_sut.only(\"timeout\", async () => { await clock.waitAsync(DEFAULT_TIMEOUT + 1); });\n\t\t\t});\n\n\t\t\tconst resultPromise = suite.runAsync({ clock });\n\t\t\tclock.tickUntilTimersExpireAsync();\n\n\t\t\tassert.equal(await resultPromise,\n\t\t\t\tcreateSuite({ children: [\n\t\t\t\t\tcreatePass({ name: \"pass\", mark: TestMark.only }),\n\t\t\t\t\tcreateFail({ name: \"fail\", error: new Error(\"my error\"), mark: TestMark.only }),\n\t\t\t\t\tcreateTimeout({ name: \"timeout\", timeout: DEFAULT_TIMEOUT, mark: TestMark.only }),\n\t\t\t\t]}),\n\t\t\t);\n\t\t});\n\n\t\tit(\"if a suite is marked .only and none of its tests are, runs all of those tests\", async () => {\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tdescribe_sut(\"not .only\", () => {\n\t\t\t\t\tit_sut(\"test1\", () => {});\n\t\t\t\t\tit_sut(\"test2\", () => {});\n\t\t\t\t});\n\t\t\t\tdescribe_sut.only(\".only\", () => {\n\t\t\t\t\tit_sut(\"test3\", () => {});\n\t\t\t\t\tit_sut(\"test4\", () => {});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tassert.equal(await suite.runAsync(),\n\t\t\t\tTestResult.suite([], [\n\t\t\t\t\tTestResult.suite(\"not .only\", [\n\t\t\t\t\t\tTestResult.skip([ \"not .only\", \"test1\" ]),\n\t\t\t\t\t\tTestResult.skip([ \"not .only\", \"test2\" ]),\n\t\t\t\t\t]),\n\t\t\t\t\tcreateSuite({ name: \".only\", mark: TestMark.only, children: [\n\t\t\t\t\t\tTestResult.pass([ \".only\", \"test3\" ]),\n\t\t\t\t\t\tTestResult.pass([ \".only\", \"test4\" ]),\n\t\t\t\t\t]}),\n\t\t\t\t]),\n\t\t\t);\n\t\t});\n\n\t\tit(\"if a suite is marked .only and none of its children are, run those tests recursively\", async () => {\n\t\t\tconst suite = test_sut.only(() => {\n\t\t\t\tdescribe_sut(() => {\n\t\t\t\t\tit_sut(\"test\", () => {});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tassert.equal(await suite.runAsync(),\n\t\t\t\tcreateSuite({ mark: TestMark.only, children: [\n\t\t\t\t\tTestResult.suite([], [\n\t\t\t\t\t\tTestResult.pass(\"test\"),\n\t\t\t\t\t]),\n\t\t\t\t]}),\n\t\t\t);\n\t\t});\n\n\t\tit(\"if a suite is marked .only and one of its children is also, only run that test\", async () => {\n\t\t\tconst suite = test_sut.only(() => {\n\t\t\t\tit_sut(\"not only\", () => {});\n\t\t\t\tit_sut.only(\"only\", () => {});\n\t\t\t});\n\n\t\t\tassert.equal(await suite.runAsync(),\n\t\t\t\tcreateSuite({ mark: TestMark.only, children: [\n\t\t\t\t\tcreateSkip({ name: \"not only\" }),\n\t\t\t\t\tcreatePass({ name: \"only\", mark: TestMark.only }),\n\t\t\t\t]}),\n\t\t\t);\n\t\t});\n\n\t\tit(\"if a suite is marked .only and one of its grandchildren is also, only run that test\", async () => {\n\t\t\tconst suite = test_sut.only(() => {\n\t\t\t\tdescribe_sut(() => {\n\t\t\t\t\tit_sut(\"not only\", () => {});\n\t\t\t\t\tit_sut.only(\"only\", () => {});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tassert.equal(await suite.runAsync(),\n\t\t\t\tcreateSuite({ mark: TestMark.only, children: [\n\t\t\t\t\tcreateSuite({ children: [\n\t\t\t\t\t\tcreateSkip({ name: \"not only\" }),\n\t\t\t\t\t\tcreatePass({ name: \"only\", mark: TestMark.only }),\n\t\t\t\t\t]}),\n\t\t\t\t]}),\n\t\t\t);\n\t\t});\n\n\t\tit(\"if a suite is marked .only and one of its child suites is also, only run that suite\", async () => {\n\t\t\tconst suite = test_sut.only(() => {\n\t\t\t\tdescribe_sut(\"not only\", () => {\n\t\t\t\t\tit_sut(\"test1\", () => {});\n\t\t\t\t});\n\t\t\t\tdescribe_sut.only(\"only\", () => {\n\t\t\t\t\tit_sut(\"test2\", () => {});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tassert.equal(await suite.runAsync(),\n\t\t\t\tcreateSuite({ mark: TestMark.only, children: [\n\t\t\t\t\tTestResult.suite(\"not only\", [\n\t\t\t\t\t\tTestResult.skip([ \"not only\", \"test1\" ]),\n\t\t\t\t\t]),\n\t\t\t\t\tcreateSuite({ name: \"only\", mark: TestMark.only, children: [\n\t\t\t\t\t\tTestResult.pass([ \"only\", \"test2\" ]),\n\t\t\t\t\t]}),\n\t\t\t\t]}),\n\t\t\t);\n\t\t});\n\n\t\tit(\"if a suite is marked .only and a child is marked .skip, skip the child\", async () => {\n\t\t\tconst suite = test_sut.only(() => {\n\t\t\t\tdescribe_sut(() => {\n\t\t\t\t\tit_sut.skip(\"test1\", () => {});\n\t\t\t\t\tit_sut(\"test2\", () => {});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tassert.equal(await suite.runAsync(),\n\t\t\t\tcreateSuite({ mark: TestMark.only, children: [\n\t\t\t\t\tcreateSuite({ children: [\n\t\t\t\t\t\tcreateSkip({ name: \"test1\", mark: TestMark.skip }),\n\t\t\t\t\t\tTestResult.pass(\"test2\"),\n\t\t\t\t\t]}),\n\t\t\t\t]}),\n\t\t\t);\n\t\t});\n\n\t\tit(\"if a suite is marked .skip and a child is marked .only, run the child\", async () => {\n\t\t\tconst suite = test_sut.skip(() => {\n\t\t\t\tdescribe_sut(() => {\n\t\t\t\t\tit_sut.only(\"test1\", () => {});\n\t\t\t\t\tit_sut(\"test2\", () => {});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tassert.equal(await suite.runAsync(),\n\t\t\t\tcreateSuite({ mark: TestMark.skip, children: [\n\t\t\t\t\tcreateSuite({ children: [\n\t\t\t\t\t\tcreatePass({ name: \"test1\", mark: TestMark.only }),\n\t\t\t\t\t\tcreateSkip({ name: \"test2\" }),\n\t\t\t\t\t]}),\n\t\t\t\t]}),\n\t\t\t);\n\t\t});\n\n\t\tit(\"if a suite is marked .only and a child suite is marked .skip, skip its children\", async () => {\n\t\t\tconst suite = test_sut.only(() => {\n\t\t\t\tdescribe_sut.skip(() => {\n\t\t\t\t\tit_sut(\"test1\", () => {});\n\t\t\t\t\tit_sut(\"test2\", () => {});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tassert.equal(await suite.runAsync(),\n\t\t\t\tcreateSuite({ mark: TestMark.only, children: [\n\t\t\t\t\tcreateSuite({ mark: TestMark.skip, children: [\n\t\t\t\t\t\tTestResult.skip(\"test1\"),\n\t\t\t\t\t\tTestResult.skip(\"test2\"),\n\t\t\t\t\t]}),\n\t\t\t\t]}),\n\t\t\t);\n\t\t});\n\n\t\tit(\"if a suite is marked .skip and a child suite is marked .only, run its children\", async () => {\n\t\t\tconst suite = test_sut.skip(() => {\n\t\t\t\tdescribe_sut.only(() => {\n\t\t\t\t\tit_sut(\"test1\", () => {});\n\t\t\t\t\tit_sut(\"test2\", () => {});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tassert.equal(await suite.runAsync(),\n\t\t\t\tcreateSuite({ mark: TestMark.skip, children: [\n\t\t\t\t\tcreateSuite({ mark: TestMark.only, children: [\n\t\t\t\t\t\tTestResult.pass(\"test1\"),\n\t\t\t\t\t\tTestResult.pass(\"test2\"),\n\t\t\t\t\t]}),\n\t\t\t\t]}),\n\t\t\t);\n\t\t});\n\n\t\tit(\"marks suites even if they fail 'beforeAll'\", async () => {\n\t\t\tconst suite = test_sut.only(\"my suite\", () => {\n\t\t\t\tbeforeAll_sut(() => { throw new Error(\"my error\"); });\n\t\t\t\tit_sut(\"my test\");\n\t\t\t});\n\n\t\t\tconst result = await suite.runAsync();\n\t\t\tassert.dotEquals(result,\n\t\t\t\tcreateSuite({ name: \"my suite\", mark: TestMark.only, children: [\n\t\t\t\t\tcreateFail({\n\t\t\t\t\t\tname: [ \"my suite\", \"beforeAll()\" ],\n\t\t\t\t\t\terror: new Error(\"my error\"),\n\t\t\t\t\t}),\n\t\t\t\t]}),\n\t\t\t);\n\t\t});\n\n\t});\n\n\n\tdescribe(\"notification\", () => {\n\n\t\tit(\"runs notify function when test completes\", async () => {\n\t\t\tconst suite = test_sut(() => {\n\t\t\t\tit_sut(\"my test\", () => {});\n\t\t\t});\n\n\t\t\tlet testResult;\n\t\t\tfunction notifyFn(result: TestResult) {\n\t\t\t\ttestResult = result;\n\t\t\t}\n\n\t\t\tawait suite.runAsync({ notifyFn });\n\t\t\tassert.dotEquals(testResult, TestResult.pass(\"my test\"));\n\t\t});\n\n\t\tit(\"runs notify function if module fails to require()\", async () => {\n\t\t\tconst suite = await TestSuite.fromModulesAsync([ \"./_module_throws.js\" ]);\n\n\t\t\tlet testResult: TestCaseResult;\n\t\t\tfunction notifyFn(result: TestCaseResult) {\n\t\t\t\ttestResult = result;\n\t\t\t}\n\n\t\t\tawait suite.runAsync({ notifyFn });\n\t\t\tassert.equal(testResult!.name, [ \"error when importing _module_throws.js\" ]);\n\t\t});\n\n\t\tit(\"runs notify function if module doesn't export a test suite\", async () => {\n\t\t\tconst suite = await TestSuite.fromModulesAsync([ \"./_module_no_export.js\" ]);\n\n\t\t\tlet testResult: TestCaseResult;\n\n\t\t\tfunction notifyFn(result: TestCaseResult) {\n\t\t\t\ttestResult = result;\n\t\t\t}\n\n\t\t\tawait suite.runAsync({ notifyFn });\n\t\t\tassert.equal(testResult!.name, [ \"error when importing _module_no_export.js\" ]);\n\t\t});\n\n\t});\n\n});\n\n\nasync function runTestAsync(testName: string, testFn: () => void) {\n\tconst suite = test_sut(() => {\n\t\tit_sut(testName, testFn);\n\t});\n\tconst result = await suite.runAsync();\n\treturn result.children[0];\n}\n\nfunction createSuite({\n\tname = [],\n\tchildren = [],\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\tchildren?: TestResult[],\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\treturn TestResult.suite(name, children, filename, mark);\n}\n\nfunction createPass({\n\tname = \"irrelevant name\",\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\treturn TestResult.pass(name, filename, mark);\n}\n\nfunction createFail({\n\tname = \"irrelevant name\",\n\terror = new Error(\"irrelevant error\"),\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\terror?: string | Error,\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\treturn TestResult.fail(name, error, filename, mark);\n}\n\nfunction createSkip({\n\tname = \"irrelevant name\",\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\treturn TestResult.skip(name, filename, mark);\n}\n\nfunction createTimeout({\n\tname = \"irrelevant name\",\n\ttimeout = 42,\n\tfilename = undefined,\n\tmark = undefined,\n}: {\n\tname?: string | string[],\n\ttimeout?: number,\n\tfilename?: string,\n\tmark?: TestMarkValue,\n} = {}) {\n\treturn TestResult.timeout(name, timeout, filename, mark);\n}"],"names":["assert","describe","it","test","afterAll","afterAll_sut","afterEach","afterEach_sut","beforeAll","beforeAll_sut","beforeEach","beforeEach_sut","describe_sut","it_sut","test_sut","TestSuite","Clock","TestMark","TestResult","TestStatus","path","SUCCESS_MODULE_PATH","resolve","dirname","THROWS_MODULE_PATH","NO_EXPORT_MODULE_PATH","IRRELEVANT_NAME","DEFAULT_TIMEOUT","DEFAULT_TIMEOUT_IN_MS","suite","fromModulesAsync","testCaseResult","pass","dotEquals","runAsync","result","allTests","equal","name","isUndefined","filename","status","fail","error","match","message","suiteRan","testRan","top","parent","Error","clock","createNullAsync","skip","waitAsync","_setFilename","actualPromise","tickUntilTimersExpireAsync","createPass","createSkip","mark","createFail","createTimeout","timeout","createSuite","only","Promise","setImmediate","runTestAsync","myConfig","receivedConfig","getConfig","config","results","noName","ordering","pushFn","push","beforeAllReceived","beforeEachReceived","afterEachReceived","afterAllReceived","beforeRan","afterRan","children","afterEachRan","afterEachError","testError","beforeTime","afterTime","now","itTime","notQuiteTimeoutFn","NEW_TIMEOUT","setTimeout","none","resultPromise","testResult","notifyFn","testName","testFn","undefined"],"mappings":"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"}